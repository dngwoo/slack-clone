(self.webpackChunksleact_ts_front=self.webpackChunksleact_ts_front||[]).push([[506],{6023:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>he});var a=n(6809),r=n.n(a);const l={},o=e=>{if(!e)return[void 0,t];function t(){e&&l[e]&&(l[e].disconnect(),delete l[e])}return l[e]||(l[e]=r()("https://sleact.nodebird.com/ws-"+e,{transports:["websocket"]}),console.info("create socket",e,l[e].id)),[l[e],t]};var i=n(8517);const c=(0,i.Z)("div",{target:"e1yu0210"})({name:"146q31f",styles:"float:right;"}),s=(0,i.Z)("header",{target:"e1yu0211"})({name:"z7c3yo",styles:"height:38px;background:#350d36;color:#ffffff;box-shadow:0 1px 0 0 rgba(255,255,255,0.1);padding:5px;text-align:center;"}),d=(0,i.Z)("img",{target:"e1yu0212"})({name:"sw188w",styles:"width:28px;height:28px;position:absolute;top:5px;right:16px;"}),p=(0,i.Z)("div",{target:"e1yu0213"})({name:"1yfii4x",styles:"padding:20px;& img{display:flex;}& #profile-name{font-weight:bold;display:inline-flex;}& #profile-active{font-size:13px;display:inline-flex;}"}),m=(0,i.Z)("button",{target:"e1yu0214"})({name:"xsdsuh",styles:"border:none;width:100%;border-top:1px solid rgb(29,28,29);background:transparent;display:block;height:33px;padding:5px 20px 5px;outline:none;cursor:pointer;"}),u=(0,i.Z)("div",{target:"e1yu0215"})({name:"13pmxen",styles:"display:flex;flex:1;"}),g=(0,i.Z)("div",{target:"e1yu0216"})({name:"kbjkj2",styles:"width:65px;display:inline-flex;flex-direction:column;align-items:center;background:#3f0e40;border-top:1px solid rgb(82,38,83);border-right:1px solid rgb(82,38,83);vertical-align:top;text-align:center;padding:15px 0 0;"}),h=(0,i.Z)("nav",{target:"e1yu0217"})({name:"1o7bixd",styles:"width:260px;display:inline-flex;flex-direction:column;background:#3f0e40;color:rgb(188,171,188);vertical-align:top;& a{padding-left:36px;color:inherit;text-decoration:none;height:28px;line-height:28px;display:flex;align-items:center;&.selected{color:white;}}& .bold{color:white;font-weight:bold;}& .count{margin-left:auto;background:#cd2553;border-radius:16px;display:inline-block;font-size:12px;font-weight:700;height:18px;line-height:18px;padding:0 9px;color:white;margin-right:16px;}& h2{height:36px;line-height:36px;margin:0;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-size:15px;}"}),x=(0,i.Z)("button",{target:"e1yu0218"})({name:"mf88dq",styles:"height:64px;line-height:64px;border:none;width:100%;text-align:left;border-top:1px solid rgb(82,38,83);border-bottom:1px solid rgb(82,38,83);font-weight:900;font-size:24px;background:transparent;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;padding:0;padding-left:16px;margin:0;color:white;cursor:pointer;"}),b=(0,i.Z)("div",{target:"e1yu0219"})({name:"177dxab",styles:"flex:1;overflow-y:auto;"}),f=(0,i.Z)("div",{target:"e1yu02110"})({name:"1gcspn6",styles:"padding:10px 0 0;& h2{padding-left:20px;}& > button{width:100%;height:28px;padding:4px;border:none;background:transparent;border-top:1px solid rgb(28,29,28);cursor:pointer;&:last-of-type{border-bottom:1px solid rgb(28,29,28);}}"}),k=(0,i.Z)("div",{target:"e1yu02111"})({name:"1rr4qq7",styles:"flex:1;"}),E=(0,i.Z)("button",{target:"e1yu02112"})({name:"1u5ecpm",styles:"color:white;font-size:24px;display:inline-block;width:40px;height:40px;background:transparent;border:none;cursor:pointer;"}),y=(0,i.Z)("button",{target:"e1yu02113"})({name:"1uwj8s5",styles:"display:inline-block;width:40px;height:40px;border-radius:10px;background:white;border:3px solid #3f0e40;margin-bottom:15px;font-size:18px;font-weight:700;color:black;cursor:pointer;"}),w=(0,i.Z)("button",{target:"e1yu02114"})("background:transparent;border:none;width:26px;height:26px;display:inline-flex;justify-content:center;align-items:center;color:white;margin-left:10px;cursor:pointer;",(({collapse:e})=>e&&"\n    & i {\n      transform: none;\n    }\n  "),";");var v=n(7294),_=n(5977),C=n(3727);const Z=({userData:e,channelData:t})=>{const{workspace:n}=(0,_.UO)(),[a]=o(n),[r,l]=(0,v.useState)(!1),[i,c]=(0,v.useState)({}),s=(0,v.useCallback)((()=>{l((e=>!e))}),[]),d=(0,v.useCallback)((e=>()=>{c((t=>({...t,[e]:void 0})))}),[]);(0,v.useEffect)((()=>{console.log("workspace 바꼈다",n),c({})}),[n]);const p=t=>{console.log("message왔다",t);const n=t.content.match(/@\[(.+?)\]\((\d)\)/g);if(n?.find((t=>t.match(/@\[(.+?)\]\((\d)\)/)[2]===e?.id.toString())))return c((e=>({...e,["c-"+t.ChannelId]:(e["c-"+t.ChannelId]||0)+1})));c((e=>({...e,["c-"+t.ChannelId]:e["c-"+t.ChannelId]||0})))};return(0,v.useEffect)((()=>(a?.on("message",p),console.log("socket on message",a?.hasListeners("message"),a),()=>{a?.off("message",p),console.log("socket off message",a?.hasListeners("message"))})),[a,e]),v.createElement(v.Fragment,null,v.createElement("h2",null,v.createElement(w,{collapse:r,onClick:s},v.createElement("i",{className:"c-icon p-channel_sidebar__section_heading_expand p-channel_sidebar__section_heading_expand--show_more_feature c-icon--caret-right c-icon--inherit c-icon--inline","data-qa":"channel-section-collapse","aria-hidden":"true"})),v.createElement("span",null,"Channels")),v.createElement("div",null,!r&&t?.map((e=>{const t=i[`c-${e.id}`];return v.createElement(C.OL,{key:e.name,activeClassName:"selected",to:`/workspace/${n}/channel/${e.name}`,onClick:d(`c-${e.id}`)},v.createElement("span",{className:t!==undefined&&t>=0?"bold":undefined},"# ",e.name),t!==undefined&&t>0&&v.createElement("span",{className:"count"},t))}))))};var S=n(3564),$=n(6848);const z=({userData:e})=>{const{workspace:t}=(0,_.UO)(),{data:n}=(0,$.ZP)(e?`/api/workspace/${t}/members`:null,S.Z),[a]=o(t),[r,l]=(0,v.useState)(!1),[i,c]=(0,v.useState)({}),[s,d]=(0,v.useState)([]),p=(0,v.useCallback)((()=>{l((e=>!e))}),[]),m=(0,v.useCallback)((e=>()=>{c((t=>({...t,[e]:0})))}),[]),u=e=>{console.log("dm왔다",e),c((t=>({...t,[e.SenderId]:t[e.SenderId]?t[e.SenderId]+1:1})))};return(0,v.useEffect)((()=>{console.log("workspace 바꼈다",t),d([]),c({})}),[t]),(0,v.useEffect)((()=>(a?.on("onlineList",(e=>{d(e)})),a?.on("dm",u),console.log("socket on dm",a?.hasListeners("dm"),a),()=>{a?.off("dm",u),console.log("socket off dm",a?.hasListeners("dm")),a?.off("onlineList")})),[a]),v.createElement(v.Fragment,null,v.createElement("h2",null,v.createElement(w,{collapse:r,onClick:p},v.createElement("i",{className:"c-icon p-channel_sidebar__section_heading_expand p-channel_sidebar__section_heading_expand--show_more_feature c-icon--caret-right c-icon--inherit c-icon--inline","data-qa":"channel-section-collapse","aria-hidden":"true"})),v.createElement("span",null,"Direct Messages")),v.createElement("div",null,!r&&n?.map((n=>{const a=s.includes(n.id);const r=i[n.id]||0;return v.createElement(C.OL,{key:n.id,activeClassName:"selected",to:`/workspace/${t}/dm/${n.id}`,onClick:m(n.id)},v.createElement("i",{className:`c-icon p-channel_sidebar__presence_icon p-channel_sidebar__presence_icon--dim_enabled c-presence ${a?"c-presence--active c-icon--presence-online":"c-icon--presence-offline"}`,"aria-hidden":"true","data-qa":"presence_indicator","data-qa-presence-self":"false","data-qa-presence-active":"false","data-qa-presence-dnd":"false"}),v.createElement("span",{className:r>0?"bold":undefined},n.nickname),n.id===e?.id&&v.createElement("span",null," (나)"),r>0&&v.createElement("span",{className:"count"},r))}))))},I=(0,i.Z)("div",{target:"eus8aqr0"})({name:"lwth7x",styles:"position:fixed;top:0;right:0;left:0;bottom:0;z-index:1000;& > div{position:absolute;display:inline-block;--saf-0:rgba(var(--sk_foreground_low,29,28,29),0.13);box-shadow:0 0 0 1px var(--saf-0),0 4px 12px 0 rgba(0,0,0,0.12);background-color:rgba(var(--sk_foreground_min_solid,248,248,248),1);border-radius:6px;user-select:none;min-width:360px;z-index:512;max-height:calc(100vh - 20px);color:rgb(29,28,29);}"}),q=(0,i.Z)("button",{target:"eus8aqr1"})({name:"87xlfi",styles:"position:absolute;right:10px;top:6px;background:transparent;border:none;font-size:30px;cursor:pointer;"}),D=({closeButton:e,style:t,show:n,children:a,onCloseModal:r})=>{const l=(0,v.useCallback)((e=>{e.stopPropagation()}),[]);return n?v.createElement(I,{onClick:r},v.createElement("div",{onClick:l,style:t},e&&v.createElement(q,{onClick:r},"×"),a)):null};D.defaultProps={closeButton:!0};const A=D,B=(0,i.Z)("div",{target:"e1q3ybao0"})({name:"1ol8hdt",styles:"position:fixed;text-align:center;left:0;bottom:0;top:0;right:0;z-index:1022;& > div{margin-top:200px;display:inline-block;width:440px;background:white;--saf-0:rgba(var(--sk_foreground_low,29,28,29),0.13);box-shadow:0 0 0 1px var(--saf-0),0 4px 12px 0 rgba(0,0,0,0.12);background-color:rgba(var(--sk_foreground_min_solid,248,248,248),1);border-radius:6px;user-select:none;max-width:440px;padding:30px 40px 0;z-index:1012;position:relative;}"}),T=(0,i.Z)("button",{target:"e1q3ybao1"})({name:"87xlfi",styles:"position:absolute;right:10px;top:6px;background:transparent;border:none;font-size:30px;cursor:pointer;"}),N=({show:e,children:t,onCloseModal:n})=>{const a=(0,v.useCallback)((e=>{e.stopPropagation()}),[]);return e?v.createElement(B,{onClick:n},v.createElement("div",{onClick:a},v.createElement(T,{onClick:n},"×"),t)):null};var M=n(8678),P=n(1039);const R=(0,i.Z)("div",{target:"e298qi10"})({name:"136i1lu",styles:"display:flex;width:100%;padding:20px;padding-top:0;"}),U=(0,i.Z)("form",{target:"e298qi11"})({name:"1128hi6",styles:"color:rgb(29,28,29);font-size:15px;width:100%;border-radius:4px;border:1px solid rgb(29,28,29);"}),j=(0,i.Z)(P.r,{target:"e298qi12"})({name:"hgrcve",styles:"font-family:Slack-Lato,appleLogo,sans-serif;font-size:15px;padding:8px 9px;& strong{background:skyblue;}& textarea{height:44px;padding:9px 10px !important;outline:none !important;border-radius:4px !important;resize:none !important;line-height:22px;border:none;}& ul{border:1px solid lightgray;max-height:200px;overflow-y:auto;padding:9px 10px;background:white;border-radius:4px;width:150px;}"}),O=(0,i.Z)("div",{target:"e298qi13"})({name:"pvyb1v",styles:"position:relative;background:rgb(248,248,248);height:41px;display:flex;border-top:1px solid rgb(221,221,221);align-items:center;border-bottom-left-radius:4px;border-bottom-right-radius:4px;"}),L=(0,i.Z)("button",{target:"e298qi14"})({name:"b9l5gg",styles:"position:absolute;right:5px;top:5px;"}),W=(0,i.Z)("button",{target:"e298qi15"})("padding:4px 20px;background:transparent;border:none;display:flex;align-items:center;color:rgb(28,29,28);width:100%;& img{margin-right:5px;}",(({focus:e})=>e&&"\n    background: #1264a3;\n    color: white;\n  "),";");var F=n(9367),H=n.n(F),Y=n(6182),K=n.n(Y);const G=({onSubmitForm:e,chat:t,onChangeChat:n,placeholder:a,data:r})=>{const l=(0,v.useRef)(null);(0,v.useEffect)((()=>{l.current&&H()(l.current)}),[l.current]);const o=(0,v.useCallback)((t=>{"Enter"===t.key&&(t.shiftKey||(t.preventDefault(),e(t)))}),[t]),i=(0,v.useCallback)(((e,t,n,a,l)=>r?v.createElement(W,{focus:l},v.createElement("img",{src:K().url(r[a].email,{s:"20px"}),alt:r[a].nickname}),v.createElement("span",null,n)):null),[r]);return v.createElement(R,null,v.createElement(U,{onSubmit:e},v.createElement(j,{id:"editor-chat",value:t,onChange:n,onKeyPress:o,placeholder:a,inputRef:l,allowSuggestionsAboveCursor:!0},v.createElement(P.p,{appendSpaceOnAdd:!0,trigger:"@",data:r?.map((e=>({id:e.id,display:e.nickname})))||[],renderSuggestion:i})),v.createElement(O,null,v.createElement(L,{className:"c-button-unstyled c-icon_button c-icon_button--light c-icon_button--size_medium c-texty_input__button c-texty_input__button--send"+(t?.trim()?"":" c-texty_input__button--disabled"),"data-qa":"texty_send_button","aria-label":"Send message","data-sk":"tooltip_parent",type:"submit",disabled:!t?.trim()},v.createElement("i",{className:"c-icon c-icon--paperplane-filled","aria-hidden":"true"})))))},J=(0,i.Z)("div",{target:"ec89ap00"})({name:"13fa69t",styles:"display:flex;padding:8px 20px;&:hover{background:#eee;}& > div:first-of-type{display:flex;width:36px;margin-right:8px;& img{width:36px;height:36px;}}& > div:last-of-type{display:flex;flex:1;}& a{text-decoration:none;color:deepskyblue;}"});var Q=n(7484),V=n.n(Q),X=n(8817);const ee=(0,v.memo)((({data:e})=>{const{workspace:t}=(0,_.UO)(),n="Sender"in e?e.Sender:e.User,a=(0,v.useMemo)((()=>(0,X.Z)({pattern:/@\[(.+?)\]\((\d)\)|\n/g,decorator(e,n){const a=e.match(/@\[(.+?)\]\((\d)\)/);return a?v.createElement(C.rU,{key:e+n,to:`/workspace/${t}/dm/${a[2]}`},"@",a[1]):v.createElement("br",{key:n})},input:e.content})),[e.content]);return v.createElement(J,null,v.createElement("div",null,v.createElement("img",{src:K().url(n.email,{s:"36px"}),alt:n.nickname})),v.createElement("div",{style:{flexWrap:"wrap"}},v.createElement("div",{style:{display:"flex",flex:"0 0 100%",alignItems:"center"}},v.createElement("b",{style:{marginRight:5}},n.nickname),v.createElement("span",{style:{fontSize:12}},V()(e.createdAt).format("h:mm A"))),v.createElement("p",{style:{flex:"0 0 100%",margin:0}},a)))})),te=(0,i.Z)("div",{target:"e1jqbxcr0"})({name:"1dpnw7g",styles:"width:100%;display:flex;flex:1;"}),ne=(0,i.Z)("section",{target:"e1jqbxcr1"})({name:"j6nott",styles:"margin-top:20px;border-top:1px solid #eee;"}),ae=(0,i.Z)("div",{target:"e1jqbxcr2"})({name:"8ji0yp",styles:"display:flex;justify-content:center;flex:1;width:100%;position:sticky;top:14px;& button{font-weight:bold;font-size:13px;height:28px;line-height:27px;padding:0 16px;z-index:2;--saf-0:rgba(var(--sk_foreground_low,29,28,29),0.13);box-shadow:0 0 0 1px var(--saf-0),0 1px 3px 0 rgba(0,0,0,0.08);border-radius:24px;position:relative;top:-13px;background:white;border:none;outline:none;}"});var re=n(1298);const le=({scrollbarRef:e,isReachingEnd:t,isEmpty:n,chatSections:a,setSize:r})=>{const l=(0,v.useCallback)((a=>{0!==a.scrollTop||t||n||r((e=>e+1)).then((()=>{e.current?.scrollTop(e.current?.getScrollHeight()-a.scrollHeight)}))}),[t,n]);return v.createElement(te,null,v.createElement(re.$B,{autoHide:!0,ref:e,onScrollFrame:l},Object.entries(a).map((([e,t])=>v.createElement(ne,{className:"section-"+e,key:e},v.createElement(ae,null,v.createElement("button",null,e)),t.map((e=>v.createElement(ee,{key:e.id,data:e}))))))))},oe=(0,i.Z)("header",{target:"exhfy1p0"})({name:"10in16a",styles:"height:64px;display:flex;width:100%;--saf-0:rgba(var(--sk_foreground_low,29,28,29),0.13);box-shadow:0 1px 0 var(--saf-0);padding:20px 16px 20px 20px;font-weight:bold;align-items:center;"});var ie=n(3046);function ce(e){const t={};return e.forEach((e=>{const n=V()(e.createdAt).format("YYYY-MM-DD");Array.isArray(t[n])?t[n].push(e):t[n]=[e]})),t}var se=n(9669),de=n.n(se),pe=n(4723);const me=()=>{const{workspace:e,channel:t}=(0,_.UO)(),[n]=o(e),{data:a,revalidate:r}=(0,$.ZP)("/api/user",S.Z),{data:l}=(0,$.ZP)(`/api/workspace/${e}/channels`,S.Z),i=l?.find((e=>e.name===t)),{data:c,revalidate:s,mutate:d,setSize:p}=(0,$.g_)((n=>`/api/workspace/${e}/channel/${t}/chats?perPage=20&page=${n+1}`),S.Z),{data:m,revalidate:u}=(0,$.ZP)(a?`/api/workspace/${e}/channel/${t}/members`:null,S.Z),[g,h,x]=(0,M.Z)(""),[b,f,k]=(0,M.Z)(""),[E,y]=(0,v.useState)(!1),w=(0,v.useRef)(null),C=0===c?.[0]?.length,Z=C||c&&c[c.length-1]?.length<20,z=(0,v.useCallback)((n=>{n.preventDefault(),b&&b.trim()&&de().post(`/api/workspace/${e}/channel/${t}/member`,{email:b}).then((()=>{u(),y(!1),k("")})).catch((e=>{console.dir(e),pe.Am.error(e.response?.data,{position:"bottom-center"})}))}),[b]),I=(0,v.useCallback)((()=>{y(!1)}),[]),q=(0,v.useCallback)((n=>{if(n.preventDefault(),g?.trim()&&c&&i&&a){const n=g;d((e=>(e[0].unshift({id:(c[0][0]?.id||0)+1,content:n,UserId:a.id,User:a,createdAt:new Date,ChannelId:i.id,Channel:i}),e)),!1).then((()=>{x(""),w.current&&(console.log("scrollToBottom!"),w.current.scrollToBottom())})),de().post(`/api/workspace/${e}/channel/${t}/chat`,{content:n}).catch(console.error)}}),[g,e,t,i,w.current,a,c]),D=e=>{e.Channel.name===t&&e.UserId!==a?.id&&d((t=>(t[0].unshift(e),t)),!1).then((()=>{w.current&&(w.current.getScrollHeight()<w.current.getClientHeight()+w.current.getScrollTop()+150?(console.log("scrollToBottom!"),w.current.scrollToBottom()):pe.Am.success("새 메시지가 도착했습니다.",{onClick(){w.current?.scrollToBottom()},closeOnClick:!0}))}))};(0,v.useEffect)((()=>(n?.on("message",D),()=>{n?.off("message",D)})),[w.current,n,a]),(0,v.useEffect)((()=>{1===c?.length&&(console.log("toBottom",c),w.current?.scrollToBottom())}),[c,w.current]);const A=(0,v.useCallback)((()=>{y(!0)}),[]);if(l&&!i)return v.createElement(_.l_,{to:`/workspace/${e}/channel/일반`});const B=ce(c?[].concat(...c).reverse():[]);return v.createElement("div",{style:{display:"flex",flexWrap:"wrap",height:"calc(100vh - 38px)",flexFlow:"column"}},v.createElement(oe,null,v.createElement("span",null,"#",t),v.createElement("div",{style:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"center"}},v.createElement("span",null,m?.length),v.createElement("button",{onClick:A,className:"c-button-unstyled p-ia__view_header__button","aria-label":"Add people to #react-native","data-sk":"tooltip_parent",type:"button"},v.createElement("i",{className:"c-icon p-ia__view_header__button_icon c-icon--add-user","aria-hidden":"true"})))),v.createElement(le,{scrollbarRef:w,isReachingEnd:Z,isEmpty:C,chatSections:B,setSize:p}),v.createElement(G,{onSubmitForm:q,chat:g,onChangeChat:h,placeholder:"Message #"+t,data:m}),v.createElement(N,{show:E,onCloseModal:I},v.createElement("form",{onSubmit:z},v.createElement(ie.__,{id:"member-label"},v.createElement("span",null,"채널 멤버 초대"),v.createElement(ie.II,{id:"member",value:b,onChange:f})),v.createElement(ie.zx,{type:"submit"},"생성하기"))),v.createElement(pe.Ix,{position:"bottom-center"}))},ue=(0,i.Z)("header",{target:"egh2dki0"})({name:"i5rome",styles:"height:64px;display:flex;width:100%;--saf-0:rgba(var(--sk_foreground_low,29,28,29),0.13);box-shadow:0 1px 0 var(--saf-0);padding:20px 16px 20px 20px;font-weight:bold;align-items:center;& img{margin-right:5px;}"}),ge=()=>{const{workspace:e,id:t}=(0,_.UO)(),[n]=o(e),{data:a}=(0,$.ZP)("/api/user",S.Z),{data:r}=(0,$.ZP)(`/api/workspace/${e}/user/${t}`,S.Z),{data:l,revalidate:i,mutate:c,setSize:s}=(0,$.g_)((n=>`/api/workspace/${e}/dm/${t}/chats?perPage=20&page=${n+1}`),S.Z),[d,p,m]=(0,M.Z)(""),u=(0,v.useRef)(null),g=0===l?.[0]?.length,h=g||l&&l[l.length-1]?.length<20,x=(0,v.useCallback)((n=>{if(n.preventDefault(),d?.trim()&&l){const n=d;c((e=>(e[0].unshift({id:(l[0][0]?.id||0)+1,content:n,SenderId:a.id,Sender:a,ReceiverId:r.id,Receiver:r,createdAt:new Date}),e)),!1).then((()=>{m(""),u.current&&(console.log("scrollToBottom!"),u.current.scrollToBottom())})),de().post(`/api/workspace/${e}/dm/${t}/chat`,{content:d}).catch(console.error)}}),[d,e,t,u.current,r,l]),b=e=>{e.SenderId===Number(t)&&a.id!==Number(t)&&c((t=>(t[0].unshift(e),t)),!1).then((()=>{u.current&&(u.current.getScrollHeight()<u.current.getClientHeight()+u.current.getScrollTop()+150?(console.log("scrollToBottom!"),u.current.scrollToBottom()):pe.Am.success("새 메시지가 도착했습니다.",{onClick(){u.current?.scrollToBottom()},closeOnClick:!0}))}))};if((0,v.useEffect)((()=>(n?.on("dm",b),()=>{n?.off("dm",b)})),[u.current,n,t]),(0,v.useEffect)((()=>{1===l?.length&&(console.log("toBottom",l),u.current?.scrollToBottom())}),[l,u.current]),!r||!a)return null;const f=ce(l?[].concat(...l).reverse():[]);return v.createElement("div",{style:{display:"flex",flexWrap:"wrap",height:"calc(100vh - 38px)",flexFlow:"column"}},v.createElement(ue,null,v.createElement("img",{src:K().url(r.email,{s:"24px"}),alt:r.nickname}),v.createElement("span",null,r.nickname)),v.createElement(le,{scrollbarRef:u,isReachingEnd:h,isEmpty:g,chatSections:f,setSize:s}),v.createElement(G,{onSubmitForm:x,chat:d,onChangeChat:p,placeholder:"Message "+r.nickname,data:[]}))};n(5202);const he=()=>{const e=(0,_.UO)(),{workspace:t}=((0,_.TH)(),(0,_.$B)(),(0,_.k6)(),e),[n,a]=o(t),{data:r,revalidate:l}=(0,$.ZP)("/api/user",S.Z),{data:i,revalidate:w}=(0,$.ZP)(r?`/api/workspace/${t}/channels`:null,S.Z);console.log("rerender","userData",r,"channelData",i);const[I,q]=(0,v.useState)(!1),[D,B]=(0,v.useState)(!1),[T,P]=(0,v.useState)(!1),[R,U]=(0,v.useState)(!1),[j,O]=(0,v.useState)(!1),[L,W,F]=(0,M.Z)(""),[H,Y,G]=(0,M.Z)(""),[J,Q,V]=(0,M.Z)(""),[X,ee,te]=(0,M.Z)(""),ne=(0,v.useCallback)((()=>{de().post("/api/logout").then((()=>{l()})).catch((e=>{console.dir(e),pe.Am.error(e.response?.data,{position:"bottom-center"})}))}),[]),ae=(0,v.useCallback)((e=>{e.preventDefault(),L&&L.trim()&&H&&H.trim()&&de().post("/api/workspace",{workspace:L,url:H}).then((()=>{l(),q(!1),F(""),G("")})).catch((e=>{console.dir(e),pe.Am.error(e.response?.data,{position:"bottom-center"})}))}),[L,H]),re=(0,v.useCallback)((e=>{e.preventDefault(),J&&J.trim()&&de().post(`/api/workspace/${t}/channel`,{name:J}).then((()=>{w(),P(!1),V("")})).catch((e=>{console.dir(e),pe.Am.error(e.response?.data,{position:"bottom-center"})}))}),[J]),le=(0,v.useCallback)((e=>{e.preventDefault(),X&&X.trim()&&de().post(`/api/workspace/${t}/member`,{email:X}).then((()=>{w(),B(!1),te("")})).catch((e=>{console.dir(e),pe.Am.error(e.response?.data,{position:"bottom-center"})}))}),[X]),oe=(0,v.useCallback)((()=>{q(!0)}),[]),ce=(0,v.useCallback)((()=>{P(!0)}),[]),se=(0,v.useCallback)((()=>{B(!0)}),[]),ue=(0,v.useCallback)((()=>{q(!1),P(!1),B(!1)}),[]),he=(0,v.useCallback)((()=>{U((e=>!e))}),[]),xe=(0,v.useCallback)((()=>{O((e=>!e))}),[]);return(0,v.useEffect)((()=>()=>{console.info("disconnect socket",t),a()}),[t]),(0,v.useEffect)((()=>{i&&r&&(console.info("로그인하자"),n?.emit("login",{id:r?.id,channels:i.map((e=>e.id))}))}),[r,i]),!1===r?v.createElement(_.l_,{to:"/login"}):r&&!r.Workspaces.find((e=>e.url===t))?v.createElement(_.l_,{to:"/workspace/sleact/channel/일반"}):v.createElement("div",null,v.createElement(s,null,r&&v.createElement(c,null,v.createElement("span",{onClick:he},v.createElement(d,{src:K().url(r.email,{s:"28px"}),alt:r.nickname})),R&&v.createElement(A,{style:{right:0,top:38},show:R,onCloseModal:he},v.createElement(p,{style:{display:"flex"}},v.createElement("img",{src:K().url(r.email,{s:"36px"}),alt:r.nickname}),v.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:10}},v.createElement("span",{id:"profile-name"},r.nickname),v.createElement("span",{id:"profile-active"},"Active"))),v.createElement(m,{onClick:ne},"로그아웃")))),v.createElement(u,null,v.createElement(g,null,r?.Workspaces.map((e=>v.createElement(C.rU,{key:e.id,to:`/workspace/${e.url}/channel/일반`},v.createElement(y,null,e.name.slice(0,1).toUpperCase())))),v.createElement(E,{onClick:oe},"+")),v.createElement(h,null,v.createElement(x,{onClick:xe},r?.Workspaces.find((e=>e.url===t))?.name),v.createElement(b,null,v.createElement(A,{show:j,onCloseModal:xe,style:{top:95,left:80}},v.createElement(f,null,v.createElement("h2",null,r?.Workspaces.find((e=>e.url===t))?.name),v.createElement("button",{onClick:se},"워크스페이스에 사용자 초대"),v.createElement("button",{onClick:ce},"채널 만들기"),v.createElement("button",{onClick:ne},"로그아웃"))),v.createElement(Z,{userData:r,channelData:i}),v.createElement(z,{userData:r}))),v.createElement(k,null,v.createElement(_.rs,null,v.createElement(_.AW,{path:"/workspace/:workspace/channel/:channel",component:me}),v.createElement(_.AW,{path:"/workspace/:workspace/dm/:id",component:ge})))),v.createElement(N,{show:I,onCloseModal:ue},v.createElement("form",{onSubmit:ae},v.createElement(ie.__,{id:"workspace-label"},v.createElement("span",null,"워크스페이스 이름"),v.createElement(ie.II,{id:"workspace",value:L,onChange:W})),v.createElement(ie.__,{id:"workspace-url-label"},v.createElement("span",null,"워크스페이스 url"),v.createElement(ie.II,{id:"workspace-url",value:H,onChange:Y})),v.createElement(ie.zx,{type:"submit"},"생성하기"))),v.createElement(N,{show:T,onCloseModal:ue},v.createElement("form",{onSubmit:re},v.createElement(ie.__,{id:"channel-label"},v.createElement("span",null,"채널 이름"),v.createElement(ie.II,{id:"channel",value:J,onChange:Q})),v.createElement(ie.zx,null,"생성하기"))),v.createElement(N,{show:D,onCloseModal:ue},v.createElement("form",{onSubmit:le},v.createElement(ie.__,{id:"member-label"},v.createElement("span",null,"이메일"),v.createElement(ie.II,{id:"member",type:"email",value:X,onChange:ee})),v.createElement(ie.zx,{type:"submit"},"초대하기"))),v.createElement(pe.Ix,{position:"bottom-center"}))}},418:()=>{}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9ob29rcy91c2VTb2NrZXQudHMiLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vbGF5b3V0cy9Xb3Jrc3BhY2Uvc3R5bGVzLnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYW5uZWxMaXN0L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0RNTGlzdC9pbmRleC50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9NZW51L3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9NZW51L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL01vZGFsL3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9Nb2RhbC9pbmRleC50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9DaGF0Qm94L3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9DaGF0Qm94L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYXQvc3R5bGVzLnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYXQvaW5kZXgudHN4Iiwid2VicGFjazovL3NsZWFjdC10cy1mcm9udC8uL2NvbXBvbmVudHMvQ2hhdExpc3Qvc3R5bGVzLnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYXRMaXN0L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9wYWdlcy9DaGFubmVsL3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vdXRpbHMvbWFrZVNlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vcGFnZXMvQ2hhbm5lbC9pbmRleC50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vcGFnZXMvRGlyZWN0TWVzc2FnZS9zdHlsZXMudHN4Iiwid2VicGFjazovL3NsZWFjdC10cy1mcm9udC8uL3BhZ2VzL0RpcmVjdE1lc3NhZ2UvaW5kZXgudHN4Iiwid2VicGFjazovL3NsZWFjdC10cy1mcm9udC8uL2xheW91dHMvV29ya3NwYWNlL2luZGV4LnRzeCJdLCJuYW1lcyI6WyJzb2NrZXRzIiwid29ya3NwYWNlIiwidW5kZWZpbmVkIiwiZGlzY29ubmVjdCIsImlvIiwidHJhbnNwb3J0cyIsImNvbnNvbGUiLCJpbmZvIiwiaWQiLCJSaWdodE1lbnUiLCJIZWFkZXIiLCJQcm9maWxlSW1nIiwiUHJvZmlsZU1vZGFsIiwiTG9nT3V0QnV0dG9uIiwiV29ya3NwYWNlV3JhcHBlciIsIldvcmtzcGFjZXMiLCJDaGFubmVscyIsIldvcmtzcGFjZU5hbWUiLCJNZW51U2Nyb2xsIiwiV29ya3NwYWNlTW9kYWwiLCJDaGF0cyIsIkFkZEJ1dHRvbiIsIldvcmtzcGFjZUJ1dHRvbiIsIkNvbGxhcHNlQnV0dG9uIiwiY29sbGFwc2UiLCJ1c2VyRGF0YSIsImNoYW5uZWxEYXRhIiwidXNlUGFyYW1zIiwic29ja2V0IiwidXNlU29ja2V0IiwiY2hhbm5lbENvbGxhcHNlIiwic2V0Q2hhbm5lbENvbGxhcHNlIiwidXNlU3RhdGUiLCJjb3VudExpc3QiLCJzZXRDb3VudExpc3QiLCJ0b2dnbGVDaGFubmVsQ29sbGFwc2UiLCJ1c2VDYWxsYmFjayIsInByZXYiLCJyZXNldENvdW50IiwibGlzdCIsInVzZUVmZmVjdCIsImxvZyIsIm9uTWVzc2FnZSIsImRhdGEiLCJtZW50aW9ucyIsImNvbnRlbnQiLCJtYXRjaCIsImZpbmQiLCJ2IiwidG9TdHJpbmciLCJDaGFubmVsSWQiLCJvbiIsImhhc0xpc3RlbmVycyIsIm9mZiIsIm9uQ2xpY2siLCJjbGFzc05hbWUiLCJkYXRhLXFhIiwiYXJpYS1oaWRkZW4iLCJtYXAiLCJjaGFubmVsIiwiY291bnQiLCJrZXkiLCJuYW1lIiwiYWN0aXZlQ2xhc3NOYW1lIiwidG8iLCJtZW1iZXJEYXRhIiwidXNlU1dSIiwiZmV0Y2hlciIsIm9ubGluZUxpc3QiLCJzZXRPbmxpbmVMaXN0IiwiU2VuZGVySWQiLCJtZW1iZXIiLCJpc09ubGluZSIsImluY2x1ZGVzIiwiZGF0YS1xYS1wcmVzZW5jZS1zZWxmIiwiZGF0YS1xYS1wcmVzZW5jZS1hY3RpdmUiLCJkYXRhLXFhLXByZXNlbmNlLWRuZCIsIm5pY2tuYW1lIiwiQ3JlYXRlTWVudSIsIkNsb3NlTW9kYWxCdXR0b24iLCJNZW51IiwiY2xvc2VCdXR0b24iLCJzdHlsZSIsInNob3ciLCJjaGlsZHJlbiIsIm9uQ2xvc2VNb2RhbCIsInN0b3BQcm9wYWdhdGlvbiIsImUiLCJkZWZhdWx0UHJvcHMiLCJDcmVhdGVNb2RhbCIsIkNoYXRBcmVhIiwiRm9ybSIsIk1lbnRpb25zVGV4dGFyZWEiLCJNZW50aW9uc0lucHV0IiwiVG9vbGJveCIsIlNlbmRCdXR0b24iLCJFYWNoTWVudGlvbiIsImZvY3VzIiwib25TdWJtaXRGb3JtIiwiY2hhdCIsIm9uQ2hhbmdlQ2hhdCIsInBsYWNlaG9sZGVyIiwidGV4dGFyZWFSZWYiLCJ1c2VSZWYiLCJjdXJyZW50IiwiYXV0b3NpemUiLCJvbktleWRvd25DaGF0Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsInJlbmRlclVzZXJTdWdnZXN0aW9uIiwic2VhcmNoIiwiaGlnaGxpZ2h0ZWREaXNwbGF5IiwiaW5kZXgiLCJzcmMiLCJncmF2YXRhciIsImVtYWlsIiwicyIsImFsdCIsIm9uU3VibWl0IiwidmFsdWUiLCJvbkNoYW5nZSIsIm9uS2V5UHJlc3MiLCJpbnB1dFJlZiIsImFsbG93U3VnZ2VzdGlvbnNBYm92ZUN1cnNvciIsImFwcGVuZFNwYWNlT25BZGQiLCJ0cmlnZ2VyIiwiZGlzcGxheSIsInJlbmRlclN1Z2dlc3Rpb24iLCJ0cmltIiwiYXJpYS1sYWJlbCIsImRhdGEtc2siLCJ0eXBlIiwiZGlzYWJsZWQiLCJDaGF0V3JhcHBlciIsIm1lbW8iLCJ1c2VyIiwiU2VuZGVyIiwiVXNlciIsInJlc3VsdCIsInVzZU1lbW8iLCJyZWdleGlmeVN0cmluZyIsInBhdHRlcm4iLCJkZWNvcmF0b3IiLCJhcnIiLCJpbnB1dCIsImZsZXhXcmFwIiwiZmxleCIsImFsaWduSXRlbXMiLCJtYXJnaW5SaWdodCIsImZvbnRTaXplIiwiZGF5anMiLCJjcmVhdGVkQXQiLCJmb3JtYXQiLCJtYXJnaW4iLCJDaGF0Wm9uZSIsIlNlY3Rpb24iLCJTdGlja3lIZWFkZXIiLCJzY3JvbGxiYXJSZWYiLCJpc1JlYWNoaW5nRW5kIiwiaXNFbXB0eSIsImNoYXRTZWN0aW9ucyIsInNldFNpemUiLCJvblNjcm9sbCIsInZhbHVlcyIsInNjcm9sbFRvcCIsInNpemUiLCJ0aGVuIiwiZ2V0U2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiYXV0b0hpZGUiLCJyZWYiLCJvblNjcm9sbEZyYW1lIiwiT2JqZWN0IiwiZW50cmllcyIsImRhdGUiLCJjaGF0cyIsIm1ha2VTZWN0aW9uIiwiY2hhdExpc3QiLCJzZWN0aW9ucyIsImZvckVhY2giLCJtb250aERhdGUiLCJBcnJheSIsImlzQXJyYXkiLCJwdXNoIiwicmV2YWxpZGF0ZSIsImNoYW5uZWxzRGF0YSIsImNoYXREYXRhIiwicmV2YWxpZGF0ZUNoYXQiLCJtdXRhdGUiLCJtdXRhdGVDaGF0IiwidXNlU1dSSW5maW5pdGUiLCJjaGFubmVsTWVtYmVyc0RhdGEiLCJyZXZhbGlkYXRlTWVtYmVycyIsInNldENoYXQiLCJ1c2VJbnB1dCIsIm5ld01lbWJlciIsIm9uQ2hhbmdlTmV3TWVtYmVyIiwic2V0TmV3TWVtYmVyIiwic2hvd0ludml0ZUNoYW5uZWxNb2RhbCIsInNldFNob3dJbnZpdGVDaGFubmVsTW9kYWwiLCJsZW5ndGgiLCJvbkludml0ZU1lbWJlciIsImF4aW9zIiwiY2F0Y2giLCJlcnJvciIsImRpciIsInRvYXN0IiwicmVzcG9uc2UiLCJwb3NpdGlvbiIsInNhdmVkQ2hhdCIsInByZXZDaGF0RGF0YSIsInVuc2hpZnQiLCJVc2VySWQiLCJEYXRlIiwiQ2hhbm5lbCIsInNjcm9sbFRvQm90dG9tIiwiZ2V0Q2xpZW50SGVpZ2h0IiwiZ2V0U2Nyb2xsVG9wIiwiY2xvc2VPbkNsaWNrIiwib25DbGlja0ludml0ZUNoYW5uZWwiLCJjb25jYXQiLCJyZXZlcnNlIiwiaGVpZ2h0IiwiZmxleEZsb3ciLCJqdXN0aWZ5Q29udGVudCIsIm15RGF0YSIsIlJlY2VpdmVySWQiLCJSZWNlaXZlciIsIk51bWJlciIsInBhcmFtcyIsInVzZUxvY2F0aW9uIiwidXNlUm91dGVNYXRjaCIsInVzZUhpc3RvcnkiLCJkaXNjb25uZWN0U29ja2V0IiwicmV2YWxpZGF0ZVVzZXIiLCJyZXZhbGlkYXRlQ2hhbm5lbCIsInNob3dDcmVhdGVXb3Jrc3BhY2VNb2RhbCIsInNldFNob3dDcmVhdGVXb3Jrc3BhY2VNb2RhbCIsInNob3dJbnZpdGVXb3Jrc3BhY2VNb2RhbCIsInNldFNob3dJbnZpdGVXb3Jrc3BhY2VNb2RhbCIsInNob3dDcmVhdGVDaGFubmVsTW9kYWwiLCJzZXRTaG93Q3JlYXRlQ2hhbm5lbE1vZGFsIiwic2hvd1VzZXJNZW51Iiwic2V0U2hvd1VzZXJNZW51Iiwic2hvd1dvcmtzcGFjZU1vZGFsIiwic2V0U2hvd1dvcmtzcGFjZU1vZGFsIiwibmV3V29ya3NwYWNlIiwib25DaGFuZ2VOZXdXb3Jrc3BhY2UiLCJzZXROZXdXb3Jrc3BhY2UiLCJuZXdVcmwiLCJvbkNoYW5nZU5ld1VybCIsInNldE5ld1VybCIsIm5ld0NoYW5uZWwiLCJvbkNoYW5nZU5ld0NoYW5uZWwiLCJzZXROZXdDaGFubmVsIiwib25Mb2dPdXQiLCJvbkNyZWF0ZVdvcmtzcGFjZSIsInVybCIsIm9uQ3JlYXRlQ2hhbm5lbCIsIm9uQ2xpY2tDcmVhdGVXb3Jrc3BhY2UiLCJvbkNsaWNrQWRkQ2hhbm5lbCIsIm9uQ2xpY2tJbnZpdGVXb3Jrc3BhY2UiLCJvbkNsaWNrVXNlclByb2ZpbGUiLCJ0b2dnbGVXb3Jrc3BhY2VNb2RhbCIsImVtaXQiLCJjaGFubmVscyIsInJpZ2h0IiwidG9wIiwiZmxleERpcmVjdGlvbiIsIm1hcmdpbkxlZnQiLCJ3cyIsInNsaWNlIiwidG9VcHBlckNhc2UiLCJsZWZ0IiwicGF0aCIsImNvbXBvbmVudCIsIkRpcmVjdE1lc3NhZ2UiXSwibWFwcGluZ3MiOiJ1S0FHQSxNQUVNQSxFQUFvRCxHQW9CMUQsRUFuQm1CQyxJQUNqQixJQUFLQSxFQUNILE1BQU8sTUFBQ0MsRUFBV0MsR0FRckIsU0FBU0EsSUFDSEYsR0FBYUQsRUFBUUMsS0FDdkJELEVBQVFDLEdBQVdFLG9CQUNaSCxFQUFRQyxJQUduQixPQVpLRCxFQUFRQyxLQUNYRCxFQUFRQyxHQUFhRyxJQUFJLGtDQUFnQkgsRUFBYSxDQUNwREksV0FBWSxDQUFDLGVBRWZDLFFBQVFDLEtBQUssZ0JBQWlCTixFQUFXRCxFQUFRQyxHQUFXTyxLQVF2RCxDQUFDUixFQUFRQyxHQUFZRSxJLGNDcEJ2QixNQUFNTSxHQUFZLGNBQUgsbUJBQUcsQ0FBSCx3Q0FJVEMsR0FBUyxpQkFBSCxtQkFBRyxDQUFILGlKQVNOQyxHQUFhLGNBQUgsbUJBQUcsQ0FBSCx1RkFRVkMsR0FBZSxjQUFILG1CQUFHLENBQUgseUtBa0JaQyxHQUFlLGlCQUFILG1CQUFHLENBQUgsdUxBWVpDLEdBQW1CLGNBQUgsbUJBQUcsQ0FBSCxnREFLaEJDLEdBQWEsY0FBSCxtQkFBRyxDQUFILG9QQWFWQyxHQUFXLGNBQUgsbUJBQUcsQ0FBSCx1bkJBb0RSQyxHQUFnQixpQkFBSCxtQkFBRyxDQUFILHdWQXFCYkMsR0FBYSxjQUFILG1CQUFHLENBQUgsbURBS1ZDLEdBQWlCLGNBQUgsb0JBQUcsQ0FBSCwrUEFzQmRDLEdBQVEsY0FBSCxvQkFBRyxDQUFILG1DQUlMQyxHQUFZLGlCQUFILG9CQUFHLENBQUgscUpBV1RDLEdBQWtCLGlCQUFILG9CQUFHLENBQUgsa05BY2ZDLEdBQWlCLGlCQUFILG9CQUFHLENBQUgsd0tBWXZCLEVBQUdDLGNBQ0hBLEdBQ0Msa0RBZHNCLEssa0NDNUwzQixNQXdGQSxFQXhGK0IsRUFBR0MsV0FBVUMsa0JBQzFDLE1BQU0sVUFBRXpCLElBQWMwQixXQUNmQyxHQUFVQyxFQUFVNUIsSUFDcEI2QixFQUFpQkMsSUFBc0JDLGVBQVMsSUFDaERDLEVBQVdDLElBQWdCRixjQUFnRCxJQUU1RUcsR0FBd0JDLGtCQUFZLEtBQ3hDTCxHQUFvQk0sSUFBVUEsTUFDN0IsSUFFR0MsR0FBYUYsa0JBQ2hCNUIsR0FBTyxLQUNOMEIsR0FBY0ssSUFDTCxJQUNGQSxFQUNILENBQUMvQixRQUFLTixRQUlaLEtBR0ZzQyxnQkFBVSxLQUNSbEMsUUFBUW1DLElBQUksZ0JBQWlCeEMsR0FDN0JpQyxFQUFhLE1BQ1osQ0FBQ2pDLElBRUosTUFBTXlDLEVBQWFDLElBQ2pCckMsUUFBUW1DLElBQUksWUFBYUUsR0FDekIsTUFBTUMsRUFBNEJELEVBQUtFLFFBQVFDLE1BQU0sdUJBQ3JELEdBQUlGLEdBQVVHLE1BQU1DLEdBQU1BLEVBQUVGLE1BQU0sc0JBQXVCLEtBQU9yQixHQUFVakIsR0FBR3lDLGFBQzNFLE9BQU9mLEdBQWNLLElBQ1osSUFDRkEsRUFDSCxDQUFFLEtBQUlJLEVBQUtPLFlBQWVYLEVBQU0sS0FBSUksRUFBS08sWUFBZ0IsR0FBSyxNQUlwRWhCLEdBQWNLLElBQ0wsSUFDRkEsRUFDSCxDQUFFLEtBQUlJLEVBQUtPLFdBQWNYLEVBQU0sS0FBSUksRUFBS08sWUFBZ0IsT0FjOUQsT0FUQVYsZ0JBQVUsS0FDUlosR0FBUXVCLEdBQUcsVUFBV1QsR0FDdEJwQyxRQUFRbUMsSUFBSSxvQkFBcUJiLEdBQVF3QixhQUFhLFdBQVl4QixHQUMzRCxLQUNMQSxHQUFReUIsSUFBSSxVQUFXWCxHQUN2QnBDLFFBQVFtQyxJQUFJLHFCQUFzQmIsR0FBUXdCLGFBQWEsZUFFeEQsQ0FBQ3hCLEVBQVFILElBR1YsZ0NBQ0UsMEJBQ0UsZ0JBQUNGLEVBQUQsQ0FBZ0JDLFNBQVVNLEVBQWlCd0IsUUFBU25CLEdBQ2xELHFCQUNFb0IsVUFBVSxtS0FDVkMsVUFBUSwyQkFDUkMsY0FBWSxVQUdoQix5Q0FFRiw0QkFDSTNCLEdBQ0FKLEdBQWFnQyxLQUFLQyxJQUNoQixNQUFNQyxFQUFRM0IsRUFBVyxLQUFJMEIsRUFBUW5ELE1BQ3JDLE9BQ0UsZ0JBQUMsS0FBRCxDQUNFcUQsSUFBS0YsRUFBUUcsS0FDYkMsZ0JBQWdCLFdBQ2hCQyxHQUFLLGNBQWEvRCxhQUFxQjBELEVBQVFHLE9BQy9DUixRQUFTaEIsRUFBWSxLQUFJcUIsRUFBUW5ELE9BRWpDLHdCQUFNK0MsVUFBV0ssSUFBVTFELFdBQWEwRCxHQUFTLEVBQUksT0FBUzFELFdBQTlELEtBQTRFeUQsRUFBUUcsTUFDbkZGLElBQVUxRCxXQUFhMEQsRUFBUSxHQUFLLHdCQUFNTCxVQUFVLFNBQVNLLFUsd0JDOUU5RSxNQXFHQSxFQXJHMEIsRUFBR25DLGVBQzNCLE1BQU0sVUFBRXhCLElBQWMwQixXQUNkZ0IsS0FBTXNCLElBQWVDLFFBQzNCekMsRUFBWSxrQkFBaUJ4QixZQUFzQixLQUNuRGtFLE1BRUt2QyxHQUFVQyxFQUFVNUIsSUFDcEI2QixFQUFpQkMsSUFBc0JDLGVBQVMsSUFDaERDLEVBQVdDLElBQWdCRixjQUFvQyxLQUMvRG9DLEVBQVlDLElBQWlCckMsY0FBbUIsSUFFakRHLEdBQXdCQyxrQkFBWSxLQUN4Q0wsR0FBb0JNLElBQVVBLE1BQzdCLElBRUdDLEdBQWFGLGtCQUNoQjVCLEdBQU8sS0FDTjBCLEdBQWNLLElBQ0wsSUFDRkEsRUFDSCxDQUFDL0IsR0FBSyxRQUlaLElBR0lrQyxFQUFhQyxJQUNqQnJDLFFBQVFtQyxJQUFJLE9BQVFFLEdBQ3BCVCxHQUFjSyxJQUNMLElBQ0ZBLEVBQ0gsQ0FBQ0ksRUFBSzJCLFVBQVcvQixFQUFLSSxFQUFLMkIsVUFBWS9CLEVBQUtJLEVBQUsyQixVQUFZLEVBQUksT0F3QnZFLE9BbkJBOUIsZ0JBQVUsS0FDUmxDLFFBQVFtQyxJQUFJLGdCQUFpQnhDLEdBQzdCb0UsRUFBYyxJQUNkbkMsRUFBYSxNQUNaLENBQUNqQyxLQUVKdUMsZ0JBQVUsS0FDUlosR0FBUXVCLEdBQUcsY0FBZVIsSUFDeEIwQixFQUFjMUIsTUFFaEJmLEdBQVF1QixHQUFHLEtBQU1ULEdBQ2pCcEMsUUFBUW1DLElBQUksZUFBZ0JiLEdBQVF3QixhQUFhLE1BQU94QixHQUNqRCxLQUNMQSxHQUFReUIsSUFBSSxLQUFNWCxHQUNsQnBDLFFBQVFtQyxJQUFJLGdCQUFpQmIsR0FBUXdCLGFBQWEsT0FDbER4QixHQUFReUIsSUFBSSxpQkFFYixDQUFDekIsSUFHRixnQ0FDRSwwQkFDRSxnQkFBQ0wsRUFBRCxDQUFnQkMsU0FBVU0sRUFBaUJ3QixRQUFTbkIsR0FDbEQscUJBQ0VvQixVQUFVLG1LQUNWQyxVQUFRLDJCQUNSQyxjQUFZLFVBR2hCLGdEQUVGLDRCQUNJM0IsR0FDQW1DLEdBQVlQLEtBQUthLElBQ2YsTUFBTUMsRUFBV0osRUFBV0ssU0FBU0YsRUFBTy9ELElBQzVDLE1BQU1vRCxFQUFRM0IsRUFBVXNDLEVBQU8vRCxLQUFPLEVBQ3RDLE9BQ0UsZ0JBQUMsS0FBRCxDQUNFcUQsSUFBS1UsRUFBTy9ELEdBQ1p1RCxnQkFBZ0IsV0FDaEJDLEdBQUssY0FBYS9ELFFBQWdCc0UsRUFBTy9ELEtBQ3pDOEMsUUFBU2hCLEVBQVdpQyxFQUFPL0QsS0FFM0IscUJBQ0UrQyxVQUFZLG9HQUNWaUIsRUFBVyw2Q0FBK0MsNkJBRTVEZixjQUFZLE9BQ1pELFVBQVEscUJBQ1JrQix3QkFBc0IsUUFDdEJDLDBCQUF3QixRQUN4QkMsdUJBQXFCLFVBRXZCLHdCQUFNckIsVUFBV0ssRUFBUSxFQUFJLE9BQVMxRCxXQUFZcUUsRUFBT00sVUFDeEROLEVBQU8vRCxLQUFPaUIsR0FBVWpCLElBQU0sb0NBQzlCb0QsRUFBUSxHQUFLLHdCQUFNTCxVQUFVLFNBQVNLLFVDdkcxQ2tCLEdBQWEsY0FBSCxtQkFBRyxDQUFILCthQXVCVkMsR0FBbUIsaUJBQUgsbUJBQUcsQ0FBSCxpSUNmdkJDLEVBQXFDLEVBQUdDLGNBQWFDLFFBQU9DLE9BQU1DLFdBQVVDLG1CQUNoRixNQUFNQyxHQUFrQmxELGtCQUFhbUQsSUFDbkNBLEVBQUVELG9CQUNELElBRUgsT0FBS0gsRUFJSCxnQkFBQ0wsRUFBRCxDQUFZeEIsUUFBUytCLEdBQ25CLHVCQUFLL0IsUUFBU2dDLEVBQWlCSixNQUFPQSxHQUNuQ0QsR0FBZSxnQkFBQ0YsRUFBRCxDQUFrQnpCLFFBQVMrQixHQUEzQixLQUNmRCxJQU5FLE1BV1hKLEVBQUtRLGFBQWUsQ0FDbEJQLGFBQWEsR0FHZixVQzdCYVEsR0FBYyxjQUFILG9CQUFHLENBQUgsbWRBMEJYVixHQUFtQixpQkFBSCxvQkFBRyxDQUFILGlJQ0Y3QixFQWxCNEMsRUFBR0ksT0FBTUMsV0FBVUMsbUJBQzdELE1BQU1DLEdBQWtCbEQsa0JBQWFtRCxJQUNuQ0EsRUFBRUQsb0JBQ0QsSUFFSCxPQUFLSCxFQUlILGdCQUFDTSxFQUFELENBQWFuQyxRQUFTK0IsR0FDcEIsdUJBQUsvQixRQUFTZ0MsR0FDWixnQkFBQyxFQUFELENBQWtCaEMsUUFBUytCLEdBQTNCLEtBQ0NELElBTkUsTSx3QkNYSixNQUFNTSxHQUFXLGNBQUgsbUJBQUcsQ0FBSCwrRUFPUkMsR0FBTyxlQUFILG1CQUFHLENBQUgsMkhBUUpDLEdBQW1CLE9BQU9DLElBQVAscUJBQUgsa2FBOEJoQkMsR0FBVSxjQUFILG1CQUFHLENBQUgsd05BV1BDLEdBQWEsaUJBQUgsbUJBQUcsQ0FBSCwrREFNVkMsR0FBYyxpQkFBSCxtQkFBRyxDQUFILCtJQWFwQixFQUFHQyxXQUNIQSxHQUNDLHFEQWZtQixLLDBDQ25EeEIsTUFnRkEsRUFoRjJCLEVBQUdDLGVBQWNDLE9BQU1DLGVBQWNDLGNBQWExRCxXQUMzRSxNQUFNMkQsR0FBY0MsWUFBNEIsT0FDaEQvRCxnQkFBVSxLQUNKOEQsRUFBWUUsU0FDZEMsSUFBU0gsRUFBWUUsV0FFdEIsQ0FBQ0YsRUFBWUUsVUFFaEIsTUFBTUUsR0FBZ0J0RSxrQkFDbkJtRCxJQUNlLFVBQVZBLEVBQUUxQixNQUNDMEIsRUFBRW9CLFdBQ0xwQixFQUFFcUIsaUJBQ0ZWLEVBQWFYLE9BSW5CLENBQUNZLElBR0dVLEdBTWlCekUsa0JBQ3JCLENBQUNtQyxFQUFRdUMsRUFBUUMsRUFBb0JDLEVBQU9mLElBQ3JDdEQsRUFJSCxnQkFBQ3FELEVBQUQsQ0FBYUMsTUFBT0EsR0FDbEIsdUJBQUtnQixJQUFLQyxRQUFhdkUsRUFBS3FFLEdBQU9HLE1BQU8sQ0FBRUMsRUFBRyxTQUFXQyxJQUFLMUUsRUFBS3FFLEdBQU9uQyxXQUMzRSw0QkFBT2tDLElBTEYsTUFTWCxDQUFDcEUsSUFHSCxPQUNFLGdCQUFDK0MsRUFBRCxLQUNFLGdCQUFDQyxFQUFELENBQU0yQixTQUFVcEIsR0FDZCxnQkFBQ04sRUFBRCxDQUNFcEYsR0FBRyxjQUNIK0csTUFBT3BCLEVBQ1BxQixTQUFVcEIsRUFDVnFCLFdBQVlmLEVBQ1pMLFlBQWFBLEVBQ2JxQixTQUFVcEIsRUFDVnFCLDZCQUEyQixHQUUzQixnQkFBQyxJQUFELENBQ0VDLGtCQUFnQixFQUNoQkMsUUFBUSxJQUNSbEYsS0FBTUEsR0FBTWUsS0FBS1YsSUFBRCxDQUFVeEMsR0FBSXdDLEVBQUV4QyxHQUFJc0gsUUFBUzlFLEVBQUU2QixjQUFnQixHQUMvRGtELGlCQUFrQmxCLEtBR3RCLGdCQUFDZixFQUFELEtBQ0UsZ0JBQUNDLEVBQUQsQ0FDRXhDLFVBQ0UscUlBQ0M0QyxHQUFNNkIsT0FBUyxHQUFLLG9DQUV2QnhFLFVBQVEsb0JBQ1J5RSxhQUFXLGVBQ1hDLFVBQVEsaUJBQ1JDLEtBQUssU0FDTEMsVUFBV2pDLEdBQU02QixRQUVqQixxQkFBR3pFLFVBQVUsbUNBQW1DRSxjQUFZLGNDcEYzRDRFLEdBQWMsY0FBSCxtQkFBRyxDQUFILHVRLGlDQ1d4QixNQXVDQSxJQXZDd0JDLFdBQUssRUFBRzNGLFdBQzlCLE1BQU0sVUFBRTFDLElBQWMwQixVQUNoQjRHLEVBQWMsV0FBWTVGLEVBQU9BLEVBQUs2RixPQUFTN0YsRUFBSzhGLEtBRXBEQyxHQUFTQyxjQUNiLEtBQ0VDLE9BQWUsQ0FDYkMsUUFBUyx5QkFDVEMsVUFBVWhHLEVBQU9rRSxHQUNmLE1BQU0rQixFQUF1QmpHLEVBQU1BLE1BQU0sc0JBQ3pDLE9BQUlpRyxFQUVBLGdCQUFDLEtBQUQsQ0FBTWxGLElBQUtmLEVBQVFrRSxFQUFPaEQsR0FBSyxjQUFhL0QsUUFBZ0I4SSxFQUFJLE1BQWhFLElBQ0lBLEVBQUksSUFJTCxzQkFBSWxGLElBQUttRCxLQUVsQmdDLE1BQU9yRyxFQUFLRSxXQUVoQixDQUFDRixFQUFLRSxVQUVSLE9BQ0UsZ0JBQUN3RixFQUFELEtBQ0UsMkJBQ0UsdUJBQUtwQixJQUFLQyxRQUFhcUIsRUFBS3BCLE1BQU8sQ0FBRUMsRUFBRyxTQUFXQyxJQUFLa0IsRUFBSzFELFlBRS9ELHVCQUFLSyxNQUFPLENBQUUrRCxTQUFVLFNBQ3RCLHVCQUFLL0QsTUFBTyxDQUFFNEMsUUFBUyxPQUFRb0IsS0FBTSxXQUFZQyxXQUFZLFdBQzNELHFCQUFHakUsTUFBTyxDQUFFa0UsWUFBYSxJQUFNYixFQUFLMUQsVUFDcEMsd0JBQU1LLE1BQU8sQ0FBRW1FLFNBQVUsS0FBT0MsSUFBTTNHLEVBQUs0RyxXQUFXQyxPQUFPLFlBRS9ELHFCQUFHdEUsTUFBTyxDQUFFZ0UsS0FBTSxXQUFZTyxPQUFRLElBQU1mLFFDNUN2Q2dCLElBQVcsY0FBSCxvQkFBRyxDQUFILDJEQU1SQyxJQUFVLGtCQUFILG9CQUFHLENBQUgscUVBS1BDLElBQWUsY0FBSCxvQkFBRyxDQUFILHVaLGVDQXpCLE1BZ0NBLEdBaEM0QixFQUFHQyxlQUFjQyxnQkFBZUMsVUFBU0MsZUFBY0MsY0FDakYsTUFBTUMsR0FBVzlILGtCQUNkK0gsSUFDMEIsSUFBckJBLEVBQU9DLFdBQW9CTixHQUFrQkMsR0FDL0NFLEdBQVNJLEdBQVNBLEVBQU8sSUFBR0MsTUFBSyxLQUMvQlQsRUFBYXJELFNBQVM0RCxVQUFVUCxFQUFhckQsU0FBUytELGtCQUFvQkosRUFBT0ssbUJBSXZGLENBQUNWLEVBQWVDLElBR2xCLE9BQ0UsZ0JBQUNMLEdBQUQsS0FDRSxnQkFBQyxNQUFELENBQVllLFVBQVEsRUFBQ0MsSUFBS2IsRUFBY2MsY0FBZVQsR0FDcERVLE9BQU9DLFFBQVFiLEdBQWN0RyxLQUFJLEVBQUVvSCxFQUFNQyxLQUV0QyxnQkFBQ3BCLEdBQUQsQ0FBU3BHLFVBQVksV0FBVXVILEVBQVFqSCxJQUFLaUgsR0FDMUMsZ0JBQUNsQixHQUFELEtBQ0UsOEJBQVNrQixJQUVWQyxFQUFNckgsS0FBS3lDLEdBQ1YsZ0JBQUMsR0FBRCxDQUFNdEMsSUFBS3NDLEVBQUszRixHQUFJbUMsS0FBTXdELFlDakM3QnpGLElBQVMsaUJBQUgsbUJBQUcsQ0FBSCxxTixlQ0NKLFNBQVNzSyxHQUFtQ0MsR0FDekQsTUFBTUMsRUFBbUMsR0FTekMsT0FSQUQsRUFBU0UsU0FBU2hGLElBQ2hCLE1BQU1pRixFQUFZOUIsSUFBTW5ELEVBQUtvRCxXQUFXQyxPQUFPLGNBQzNDNkIsTUFBTUMsUUFBUUosRUFBU0UsSUFDekJGLEVBQVNFLEdBQVdHLEtBQUtwRixHQUV6QitFLEVBQVNFLEdBQWEsQ0FBQ2pGLE1BR3BCK0UsRSxxQ0NLVCxNQWtMQSxHQWpMZ0IsS0FDZCxNQUFNLFVBQUVqTCxFQUFGLFFBQWEwRCxJQUFZaEMsV0FDeEJDLEdBQVVDLEVBQVU1QixJQUNuQjBDLEtBQU1sQixFQUFSLFdBQWtCK0osSUFBZXRILFFBQWMsWUFBYUMsTUFDMUR4QixLQUFNOEksSUFBaUJ2SCxRQUFvQixrQkFBaUJqRSxhQUFzQmtFLEtBQ3BGekMsRUFBYytKLEdBQWMxSSxNQUFNQyxHQUFNQSxFQUFFYyxPQUFTSCxLQUNqRGhCLEtBQU0rSSxFQUFVRixXQUFZRyxFQUFnQkMsT0FBUUMsRUFBdEQsUUFBa0U1QixJQUFZNkIsU0FDakY5RSxHQUFXLGtCQUFpQi9HLGFBQXFCMEQsMkJBQTJDcUQsRUFBUSxLQUNyRzdDLE1BRU14QixLQUFNb0osRUFBb0JQLFdBQVlRLElBQXNCOUgsUUFDbEV6QyxFQUFZLGtCQUFpQnhCLGFBQXFCMEQsWUFBb0IsS0FDdEVRLE1BRUtnQyxFQUFNQyxFQUFjNkYsSUFBV0MsT0FBUyxLQUN4Q0MsRUFBV0MsRUFBbUJDLElBQWdCSCxPQUFTLEtBQ3ZESSxFQUF3QkMsSUFBNkJ2SyxlQUFTLEdBQy9ENkgsR0FBZXRELFlBQW1CLE1BRWxDd0QsRUFBb0MsSUFBMUIyQixJQUFXLElBQUljLE9BQ3pCMUMsRUFBZ0JDLEdBQVkyQixHQUFZQSxFQUFTQSxFQUFTYyxPQUFTLElBQUlBLE9BckI3RCxHQXVCVkMsR0FBaUJySyxrQkFDcEJtRCxJQUNDQSxFQUFFcUIsaUJBQ0d1RixHQUFjQSxFQUFVbkUsUUFHN0IwRSxVQUNTLGtCQUFpQnpNLGFBQXFCMEQsV0FBa0IsQ0FDN0R3RCxNQUFPZ0YsSUFFUjdCLE1BQUssS0FDSjBCLElBQ0FPLEdBQTBCLEdBQzFCRixFQUFhLE9BRWRNLE9BQU9DLElBQ050TSxRQUFRdU0sSUFBSUQsR0FDWkUsWUFBWUYsRUFBTUcsVUFBVXBLLEtBQU0sQ0FBRXFLLFNBQVUsdUJBR3BELENBQUNiLElBR0c5RyxHQUFlakQsa0JBQVksS0FDL0JtSyxHQUEwQixLQUN6QixJQUVHckcsR0FBZTlELGtCQUNsQm1ELElBRUMsR0FEQUEsRUFBRXFCLGlCQUNFVCxHQUFNNkIsUUFBVTBELEdBQVloSyxHQUFlRCxFQUFVLENBQ3ZELE1BQU13TCxFQUFZOUcsRUFDbEIwRixHQUFZcUIsSUFDVkEsRUFBYSxHQUFHQyxRQUFRLENBQ3RCM00sSUFBS2tMLEVBQVMsR0FBRyxJQUFJbEwsSUFBTSxHQUFLLEVBQ2hDcUMsUUFBU29LLEVBQ1RHLE9BQVEzTCxFQUFTakIsR0FDakJpSSxLQUFNaEgsRUFDTjhILFVBQVcsSUFBSThELEtBQ2ZuSyxVQUFXeEIsRUFBWWxCLEdBQ3ZCOE0sUUFBUzVMLElBRUp3TCxLQUNOLEdBQU81QyxNQUFLLEtBQ2IyQixFQUFRLElBQ0pwQyxFQUFhckQsVUFDZmxHLFFBQVFtQyxJQUFJLG1CQUNab0gsRUFBYXJELFFBQVErRyxxQkFHekJiLFVBQ1Msa0JBQWlCek0sYUFBcUIwRCxTQUFnQixDQUMzRGQsUUFBU29LLElBRVZOLE1BQU1yTSxRQUFRc00sVUFHckIsQ0FBQ3pHLEVBQU1sRyxFQUFXMEQsRUFBU2pDLEVBQWFtSSxFQUFhckQsUUFBUy9FLEVBQVVpSyxJQUdwRWhKLEVBQWFDLElBQ2JBLEVBQUsySyxRQUFReEosT0FBU0gsR0FBV2hCLEVBQUt5SyxTQUFXM0wsR0FBVWpCLElBQzdEcUwsR0FBWUgsSUFDVkEsRUFBUyxHQUFHeUIsUUFBUXhLLEdBQ2IrSSxLQUNOLEdBQU9wQixNQUFLLEtBQ1RULEVBQWFyRCxVQUVicUQsRUFBYXJELFFBQVErRCxrQkFDckJWLEVBQWFyRCxRQUFRZ0gsa0JBQW9CM0QsRUFBYXJELFFBQVFpSCxlQUFpQixLQUUvRW5OLFFBQVFtQyxJQUFJLG1CQUNab0gsRUFBYXJELFFBQVErRyxrQkFFckJULGNBQWMsaUJBQWtCLENBQzlCeEosVUFDRXVHLEVBQWFyRCxTQUFTK0csa0JBRXhCRyxjQUFjLFVBUTFCbEwsZ0JBQVUsS0FDUlosR0FBUXVCLEdBQUcsVUFBV1QsR0FDZixLQUNMZCxHQUFReUIsSUFBSSxVQUFXWCxNQUV4QixDQUFDbUgsRUFBYXJELFFBQVM1RSxFQUFRSCxLQUVsQ2UsZ0JBQVUsS0FDaUIsSUFBckJrSixHQUFVYyxTQUNabE0sUUFBUW1DLElBQUksV0FBWWlKLEdBQ3hCN0IsRUFBYXJELFNBQVMrRyxvQkFFdkIsQ0FBQzdCLEVBQVU3QixFQUFhckQsVUFFM0IsTUFBTW1ILEdBQXVCdkwsa0JBQVksS0FDdkNtSyxHQUEwQixLQUN6QixJQUVILEdBQUlkLElBQWlCL0osRUFDbkIsT0FBTyxnQkFBQyxLQUFELENBQVVzQyxHQUFLLGNBQWEvRCxpQkFHckMsTUFBTStKLEVBQWVnQixHQUFZVSxFQUFZLEdBQWVrQyxVQUFVbEMsR0FBVW1DLFVBQVksSUFFNUYsT0FDRSx1QkFBSzNJLE1BQU8sQ0FBRTRDLFFBQVMsT0FBUW1CLFNBQVUsT0FBUTZFLE9BQVEscUJBQXNCQyxTQUFVLFdBQ3ZGLGdCQUFDLEdBQUQsS0FDRSxnQ0FBUXBLLEdBQ1IsdUJBQUt1QixNQUFPLENBQUU0QyxRQUFTLE9BQVFvQixLQUFNLEVBQUc4RSxlQUFnQixXQUFZN0UsV0FBWSxXQUM5RSw0QkFBTzRDLEdBQW9CUyxRQUMzQiwwQkFDRWxKLFFBQVNxSyxFQUNUcEssVUFBVSw4Q0FDVjBFLGFBQVcsOEJBQ1hDLFVBQVEsaUJBQ1JDLEtBQUssVUFFTCxxQkFBRzVFLFVBQVUseURBQXlERSxjQUFZLFlBSXhGLGdCQUFDLEdBQUQsQ0FDRW9HLGFBQWNBLEVBQ2RDLGNBQWVBLEVBQ2ZDLFFBQVNBLEVBQ1RDLGFBQWNBLEVBQ2RDLFFBQVNBLElBRVgsZ0JBQUMsRUFBRCxDQUNFL0QsYUFBY0EsRUFDZEMsS0FBTUEsRUFDTkMsYUFBY0EsRUFDZEMsWUFBYyxZQUFXMUMsRUFDekJoQixLQUFNb0osSUFFUixnQkFBQyxFQUFELENBQU81RyxLQUFNbUgsRUFBd0JqSCxhQUFjQSxHQUNqRCx3QkFBTWlDLFNBQVVtRixHQUNkLGdCQUFDLE1BQUQsQ0FBT2pNLEdBQUcsZ0JBQ1Isd0NBQ0EsZ0JBQUMsTUFBRCxDQUFPQSxHQUFHLFNBQVMrRyxNQUFPNEUsRUFBVzNFLFNBQVU0RSxLQUVqRCxnQkFBQyxNQUFELENBQVFqRSxLQUFLLFVBQWIsVUFHSixnQkFBQyxNQUFELENBQWdCNkUsU0FBUyxvQkM3TGxCdE0sSUFBUyxpQkFBSCxtQkFBRyxDQUFILDRPQ3NJbkIsR0F2SHNCLEtBQ3BCLE1BQU0sVUFBRVQsRUFBRixHQUFhTyxJQUFPbUIsV0FDbkJDLEdBQVVDLEVBQVU1QixJQUNuQjBDLEtBQU1zTCxJQUFXL0osUUFBTyxZQUFhQyxNQUNyQ3hCLEtBQU1sQixJQUFheUMsUUFBUSxrQkFBaUJqRSxVQUFrQk8sSUFBTTJELE1BQ3BFeEIsS0FBTStJLEVBQVVGLFdBQVlHLEVBQWdCQyxPQUFRQyxFQUF0RCxRQUFrRTVCLElBQVk2QixTQUNqRjlFLEdBQVcsa0JBQWlCL0csUUFBZ0JPLDJCQUFzQ3dHLEVBQVEsS0FDM0Y3QyxNQUVLZ0MsRUFBTUMsRUFBYzZGLElBQVdDLE9BQVMsSUFDekNyQyxHQUFldEQsWUFBbUIsTUFFbEN3RCxFQUFvQyxJQUExQjJCLElBQVcsSUFBSWMsT0FDekIxQyxFQUFnQkMsR0FBWTJCLEdBQVlBLEVBQVNBLEVBQVNjLE9BQVMsSUFBSUEsT0FkN0QsR0FnQlZ0RyxHQUFlOUQsa0JBQ2xCbUQsSUFFQyxHQURBQSxFQUFFcUIsaUJBQ0VULEdBQU02QixRQUFVMEQsRUFBVSxDQUM1QixNQUFNdUIsRUFBWTlHLEVBQ2xCMEYsR0FBWXFCLElBQ1ZBLEVBQWEsR0FBR0MsUUFBUSxDQUN0QjNNLElBQUtrTCxFQUFTLEdBQUcsSUFBSWxMLElBQU0sR0FBSyxFQUNoQ3FDLFFBQVNvSyxFQUNUM0ksU0FBVTJKLEVBQU96TixHQUNqQmdJLE9BQVF5RixFQUNSQyxXQUFZek0sRUFBU2pCLEdBQ3JCMk4sU0FBVTFNLEVBQ1Y4SCxVQUFXLElBQUk4RCxPQUVWSCxLQUNOLEdBQU81QyxNQUFLLEtBQ2IyQixFQUFRLElBQ0pwQyxFQUFhckQsVUFDZmxHLFFBQVFtQyxJQUFJLG1CQUNab0gsRUFBYXJELFFBQVErRyxxQkFHekJiLFVBQ1Msa0JBQWlCek0sUUFBZ0JPLFNBQVcsQ0FDakRxQyxRQUFTc0QsSUFFVndHLE1BQU1yTSxRQUFRc00sVUFHckIsQ0FBQ3pHLEVBQU1sRyxFQUFXTyxFQUFJcUosRUFBYXJELFFBQVMvRSxFQUFVaUssSUFHbERoSixFQUNIQyxJQUNLQSxFQUFLMkIsV0FBYThKLE9BQU81TixJQUFPeU4sRUFBT3pOLEtBQU80TixPQUFPNU4sSUFDdkRxTCxHQUFZSCxJQUNWQSxFQUFTLEdBQUd5QixRQUFReEssR0FDYitJLEtBQ04sR0FBT3BCLE1BQUssS0FDVFQsRUFBYXJELFVBRWJxRCxFQUFhckQsUUFBUStELGtCQUNyQlYsRUFBYXJELFFBQVFnSCxrQkFBb0IzRCxFQUFhckQsUUFBUWlILGVBQWlCLEtBRS9Fbk4sUUFBUW1DLElBQUksbUJBQ1pvSCxFQUFhckQsUUFBUStHLGtCQUVyQlQsY0FBYyxpQkFBa0IsQ0FDOUJ4SixVQUNFdUcsRUFBYXJELFNBQVMrRyxrQkFFeEJHLGNBQWMsU0FzQjVCLElBZEFsTCxnQkFBVSxLQUNSWixHQUFRdUIsR0FBRyxLQUFNVCxHQUNWLEtBQ0xkLEdBQVF5QixJQUFJLEtBQU1YLE1BRW5CLENBQUNtSCxFQUFhckQsUUFBUzVFLEVBQVFwQixLQUVsQ2dDLGdCQUFVLEtBQ2lCLElBQXJCa0osR0FBVWMsU0FDWmxNLFFBQVFtQyxJQUFJLFdBQVlpSixHQUN4QjdCLEVBQWFyRCxTQUFTK0csb0JBRXZCLENBQUM3QixFQUFVN0IsRUFBYXJELFdBRXRCL0UsSUFBYXdNLEVBQ2hCLE9BQU8sS0FHVCxNQUFNakUsRUFBZWdCLEdBQVlVLEVBQVksR0FBYWtDLFVBQVVsQyxHQUFVbUMsVUFBWSxJQUUxRixPQUNFLHVCQUFLM0ksTUFBTyxDQUFFNEMsUUFBUyxPQUFRbUIsU0FBVSxPQUFRNkUsT0FBUSxxQkFBc0JDLFNBQVUsV0FDdkYsZ0JBQUMsR0FBRCxLQUNFLHVCQUFLOUcsSUFBS0MsUUFBYXpGLEVBQVMwRixNQUFPLENBQUVDLEVBQUcsU0FBV0MsSUFBSzVGLEVBQVNvRCxXQUNyRSw0QkFBT3BELEVBQVNvRCxXQUVsQixnQkFBQyxHQUFELENBQ0VnRixhQUFjQSxFQUNkQyxjQUFlQSxFQUNmQyxRQUFTQSxFQUNUQyxhQUFjQSxFQUNkQyxRQUFTQSxJQUVYLGdCQUFDLEVBQUQsQ0FDRS9ELGFBQWNBLEVBQ2RDLEtBQU1BLEVBQ05DLGFBQWNBLEVBQ2RDLFlBQWMsV0FBVTVFLEVBQVNvRCxTQUNqQ2xDLEtBQU0sTyxRQzNGZCxNQXdQQSxHQXhQa0IsS0FDaEIsTUFBTTBMLEdBQVMxTSxXQUtULFVBQUUxQixLQUpTcU8sV0FDRUMsV0FDSEMsVUFFTUgsSUFDZnpNLEVBQVE2TSxHQUFvQjVNLEVBQVU1QixJQUNyQzBDLEtBQU1sQixFQUFVK0osV0FBWWtELElBQW1CeEssUUFBc0IsWUFBYUMsTUFDbEZ4QixLQUFNakIsRUFBYThKLFdBQVltRCxJQUFzQnpLLFFBQzNEekMsRUFBWSxrQkFBaUJ4QixhQUF1QixLQUNwRGtFLEtBRUY3RCxRQUFRbUMsSUFBSSxXQUFZLFdBQVloQixFQUFVLGNBQWVDLEdBQzdELE1BQU9rTixFQUEwQkMsSUFBK0I3TSxlQUFTLElBQ2xFOE0sRUFBMEJDLElBQStCL00sZUFBUyxJQUNsRWdOLEVBQXdCQyxJQUE2QmpOLGVBQVMsSUFDOURrTixFQUFjQyxJQUFtQm5OLGVBQVMsSUFDMUNvTixFQUFvQkMsSUFBeUJyTixlQUFTLElBQ3REc04sRUFBY0MsRUFBc0JDLElBQW1CdEQsT0FBUyxLQUNoRXVELEVBQVFDLEVBQWdCQyxJQUFhekQsT0FBUyxLQUM5QzBELEVBQVlDLEVBQW9CQyxJQUFpQjVELE9BQVMsS0FDMURDLEVBQVdDLEdBQW1CQyxLQUFnQkgsT0FBUyxJQUV4RDZELElBQVczTixrQkFBWSxLQUMzQnNLLFVBQ1EsZUFDTHBDLE1BQUssS0FDSm9FLE9BRUQvQixPQUFPQyxJQUNOdE0sUUFBUXVNLElBQUlELEdBQ1pFLFlBQVlGLEVBQU1HLFVBQVVwSyxLQUFNLENBQUVxSyxTQUFVLHVCQUVqRCxJQUVHZ0QsSUFBb0I1TixrQkFDdkJtRCxJQUNDQSxFQUFFcUIsaUJBQ0cwSSxHQUFpQkEsRUFBYXRILFFBRzlCeUgsR0FBV0EsRUFBT3pILFFBR3ZCMEUsVUFDUSxpQkFBa0IsQ0FDdEJ6TSxVQUFXcVAsRUFDWFcsSUFBS1IsSUFFTm5GLE1BQUssS0FDSm9FLElBQ0FHLEdBQTRCLEdBQzVCVyxFQUFnQixJQUNoQkcsRUFBVSxPQUVYaEQsT0FBT0MsSUFDTnRNLFFBQVF1TSxJQUFJRCxHQUNaRSxZQUFZRixFQUFNRyxVQUFVcEssS0FBTSxDQUFFcUssU0FBVSx1QkFHcEQsQ0FBQ3NDLEVBQWNHLElBRVhTLElBQWtCOU4sa0JBQ3JCbUQsSUFDQ0EsRUFBRXFCLGlCQUNHZ0osR0FBZUEsRUFBVzVILFFBRy9CMEUsVUFDUyxrQkFBaUJ6TSxZQUFxQixDQUMzQzZELEtBQU04TCxJQUVQdEYsTUFBSyxLQUNKcUUsSUFDQU0sR0FBMEIsR0FDMUJhLEVBQWMsT0FFZm5ELE9BQU9DLElBQ050TSxRQUFRdU0sSUFBSUQsR0FDWkUsWUFBWUYsRUFBTUcsVUFBVXBLLEtBQU0sQ0FBRXFLLFNBQVUsdUJBR3BELENBQUM0QyxJQUVHbkQsSUFBaUJySyxrQkFDcEJtRCxJQUNDQSxFQUFFcUIsaUJBQ0d1RixHQUFjQSxFQUFVbkUsUUFHN0IwRSxVQUNTLGtCQUFpQnpNLFdBQW9CLENBQzFDa0gsTUFBT2dGLElBRVI3QixNQUFLLEtBQ0pxRSxJQUNBSSxHQUE0QixHQUM1QjFDLEdBQWEsT0FFZE0sT0FBT0MsSUFDTnRNLFFBQVF1TSxJQUFJRCxHQUNaRSxZQUFZRixFQUFNRyxVQUFVcEssS0FBTSxDQUFFcUssU0FBVSx1QkFHcEQsQ0FBQ2IsSUFHR2dFLElBQXlCL04sa0JBQVksS0FDekN5TSxHQUE0QixLQUMzQixJQUVHdUIsSUFBb0JoTyxrQkFBWSxLQUNwQzZNLEdBQTBCLEtBQ3pCLElBRUdvQixJQUF5QmpPLGtCQUFZLEtBQ3pDMk0sR0FBNEIsS0FDM0IsSUFFRzFKLElBQWVqRCxrQkFBWSxLQUMvQnlNLEdBQTRCLEdBQzVCSSxHQUEwQixHQUMxQkYsR0FBNEIsS0FDM0IsSUFFR3VCLElBQXFCbE8sa0JBQVksS0FDckMrTSxHQUFpQjlNLElBQVVBLE1BQzFCLElBRUdrTyxJQUF1Qm5PLGtCQUFZLEtBQ3ZDaU4sR0FBdUJoTixJQUFVQSxNQUNoQyxJQWVILE9BYkFHLGdCQUFVLElBQ0QsS0FDTGxDLFFBQVFDLEtBQUssb0JBQXFCTixHQUNsQ3dPLE1BRUQsQ0FBQ3hPLEtBQ0p1QyxnQkFBVSxLQUNKZCxHQUFlRCxJQUNqQm5CLFFBQVFDLEtBQUssU0FDYnFCLEdBQVE0TyxLQUFLLFFBQVMsQ0FBRWhRLEdBQUlpQixHQUFVakIsR0FBSWlRLFNBQVUvTyxFQUFZZ0MsS0FBS1YsR0FBTUEsRUFBRXhDLFVBRTlFLENBQUNpQixFQUFVQyxLQUVHLElBQWJELEVBQ0ssZ0JBQUMsS0FBRCxDQUFVdUMsR0FBRyxXQUVsQnZDLElBQWFBLEVBQVNWLFdBQVdnQyxNQUFNQyxHQUFNQSxFQUFFaU4sTUFBUWhRLElBQ2xELGdCQUFDLEtBQUQsQ0FBVStELEdBQUcsaUNBSXBCLDJCQUNFLGdCQUFDdEQsRUFBRCxLQUNHZSxHQUNDLGdCQUFDaEIsRUFBRCxLQUNFLHdCQUFNNkMsUUFBU2dOLElBQ2IsZ0JBQUMzUCxFQUFELENBQVlzRyxJQUFLQyxRQUFhekYsRUFBUzBGLE1BQU8sQ0FBRUMsRUFBRyxTQUFXQyxJQUFLNUYsRUFBU29ELFlBRTdFcUssR0FDQyxnQkFBQyxFQUFELENBQU1oSyxNQUFPLENBQUV3TCxNQUFPLEVBQUdDLElBQUssSUFBTXhMLEtBQU0rSixFQUFjN0osYUFBY2lMLElBQ3BFLGdCQUFDMVAsRUFBRCxDQUFjc0UsTUFBTyxDQUFFNEMsUUFBUyxTQUM5Qix1QkFBS2IsSUFBS0MsUUFBYXpGLEVBQVMwRixNQUFPLENBQUVDLEVBQUcsU0FBV0MsSUFBSzVGLEVBQVNvRCxXQUNyRSx1QkFBS0ssTUFBTyxDQUFFNEMsUUFBUyxPQUFROEksY0FBZSxTQUFVQyxXQUFZLEtBQ2xFLHdCQUFNclEsR0FBRyxnQkFBZ0JpQixFQUFTb0QsVUFDbEMsd0JBQU1yRSxHQUFHLGtCQUFULFlBR0osZ0JBQUNLLEVBQUQsQ0FBY3lDLFFBQVN5TSxJQUF2QixXQU1WLGdCQUFDalAsRUFBRCxLQUNFLGdCQUFDQyxFQUFELEtBQ0dVLEdBQVVWLFdBQVcyQyxLQUFLb04sR0FFdkIsZ0JBQUMsS0FBRCxDQUFNak4sSUFBS2lOLEVBQUd0USxHQUFJd0QsR0FBSyxjQUFhOE0sRUFBR2Isa0JBQ3JDLGdCQUFDM08sRUFBRCxLQUFrQndQLEVBQUdoTixLQUFLaU4sTUFBTSxFQUFHLEdBQUdDLGtCQUk1QyxnQkFBQzNQLEVBQUQsQ0FBV2lDLFFBQVM2TSxJQUFwQixNQUVGLGdCQUFDblAsRUFBRCxLQUNFLGdCQUFDQyxFQUFELENBQWVxQyxRQUFTaU4sSUFDckI5TyxHQUFVVixXQUFXZ0MsTUFBTUMsR0FBTUEsRUFBRWlOLE1BQVFoUSxLQUFZNkQsTUFFMUQsZ0JBQUM1QyxFQUFELEtBQ0UsZ0JBQUMsRUFBRCxDQUFNaUUsS0FBTWlLLEVBQW9CL0osYUFBY2tMLEdBQXNCckwsTUFBTyxDQUFFeUwsSUFBSyxHQUFJTSxLQUFNLEtBQzFGLGdCQUFDOVAsRUFBRCxLQUNFLDBCQUFLTSxHQUFVVixXQUFXZ0MsTUFBTUMsR0FBTUEsRUFBRWlOLE1BQVFoUSxLQUFZNkQsTUFDNUQsMEJBQVFSLFFBQVMrTSxJQUFqQixrQkFDQSwwQkFBUS9NLFFBQVM4TSxJQUFqQixVQUNBLDBCQUFROU0sUUFBU3lNLElBQWpCLFVBR0osZ0JBQUMsRUFBRCxDQUFhdE8sU0FBVUEsRUFBVUMsWUFBYUEsSUFDOUMsZ0JBQUMsRUFBRCxDQUFRRCxTQUFVQSxNQUd0QixnQkFBQ0wsRUFBRCxLQUNFLGdCQUFDLEtBQUQsS0FDRSxnQkFBQyxLQUFELENBQU84UCxLQUFLLHlDQUF5Q0MsVUFBVzdELEtBQ2hFLGdCQUFDLEtBQUQsQ0FBTzRELEtBQUssK0JBQStCQyxVQUFXQyxRQUk1RCxnQkFBQyxFQUFELENBQU9qTSxLQUFNeUosRUFBMEJ2SixhQUFjQSxJQUNuRCx3QkFBTWlDLFNBQVUwSSxJQUNkLGdCQUFDLE1BQUQsQ0FBT3hQLEdBQUcsbUJBQ1IseUNBQ0EsZ0JBQUMsTUFBRCxDQUFPQSxHQUFHLFlBQVkrRyxNQUFPK0gsRUFBYzlILFNBQVUrSCxLQUV2RCxnQkFBQyxNQUFELENBQU8vTyxHQUFHLHVCQUNSLDBDQUNBLGdCQUFDLE1BQUQsQ0FBT0EsR0FBRyxnQkFBZ0IrRyxNQUFPa0ksRUFBUWpJLFNBQVVrSSxLQUVyRCxnQkFBQyxNQUFELENBQVF2SCxLQUFLLFVBQWIsVUFHSixnQkFBQyxFQUFELENBQU9oRCxLQUFNNkosRUFBd0IzSixhQUFjQSxJQUNqRCx3QkFBTWlDLFNBQVU0SSxJQUNkLGdCQUFDLE1BQUQsQ0FBTzFQLEdBQUcsaUJBQ1IscUNBQ0EsZ0JBQUMsTUFBRCxDQUFPQSxHQUFHLFVBQVUrRyxNQUFPcUksRUFBWXBJLFNBQVVxSSxLQUVuRCxnQkFBQyxNQUFELGVBR0osZ0JBQUMsRUFBRCxDQUFPMUssS0FBTTJKLEVBQTBCekosYUFBY0EsSUFDbkQsd0JBQU1pQyxTQUFVbUYsSUFDZCxnQkFBQyxNQUFELENBQU9qTSxHQUFHLGdCQUNSLG1DQUNBLGdCQUFDLE1BQUQsQ0FBT0EsR0FBRyxTQUFTMkgsS0FBSyxRQUFRWixNQUFPNEUsRUFBVzNFLFNBQVU0RSxNQUU5RCxnQkFBQyxNQUFELENBQVFqRSxLQUFLLFVBQWIsVUFHSixnQkFBQyxNQUFELENBQWdCNkUsU0FBUyxxQiIsImZpbGUiOiI1MDYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgaW8gZnJvbSAnc29ja2V0LmlvLWNsaWVudCc7XG5cbmNvbnN0IGJhY2tVcmwgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gJ2h0dHBzOi8vc2xlYWN0Lm5vZGViaXJkLmNvbScgOiAnaHR0cDovL2xvY2FsaG9zdDozMDk1JztcblxuY29uc3Qgc29ja2V0czogeyBba2V5OiBzdHJpbmddOiBTb2NrZXRJT0NsaWVudC5Tb2NrZXQgfSA9IHt9O1xuY29uc3QgdXNlU29ja2V0ID0gKHdvcmtzcGFjZT86IHN0cmluZyk6IFtTb2NrZXRJT0NsaWVudC5Tb2NrZXQgfCB1bmRlZmluZWQsICgpID0+IHZvaWRdID0+IHtcbiAgaWYgKCF3b3Jrc3BhY2UpIHtcbiAgICByZXR1cm4gW3VuZGVmaW5lZCwgZGlzY29ubmVjdF07XG4gIH1cbiAgaWYgKCFzb2NrZXRzW3dvcmtzcGFjZV0pIHtcbiAgICBzb2NrZXRzW3dvcmtzcGFjZV0gPSBpbyhgJHtiYWNrVXJsfS93cy0ke3dvcmtzcGFjZX1gLCB7XG4gICAgICB0cmFuc3BvcnRzOiBbJ3dlYnNvY2tldCddLFxuICAgIH0pO1xuICAgIGNvbnNvbGUuaW5mbygnY3JlYXRlIHNvY2tldCcsIHdvcmtzcGFjZSwgc29ja2V0c1t3b3Jrc3BhY2VdLmlkKTtcbiAgfVxuICBmdW5jdGlvbiBkaXNjb25uZWN0KCkge1xuICAgIGlmICh3b3Jrc3BhY2UgJiYgc29ja2V0c1t3b3Jrc3BhY2VdKSB7XG4gICAgICBzb2NrZXRzW3dvcmtzcGFjZV0uZGlzY29ubmVjdCgpO1xuICAgICAgZGVsZXRlIHNvY2tldHNbd29ya3NwYWNlXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtzb2NrZXRzW3dvcmtzcGFjZV0sIGRpc2Nvbm5lY3RdO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlU29ja2V0O1xuIiwiaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuXG5leHBvcnQgY29uc3QgUmlnaHRNZW51ID0gc3R5bGVkLmRpdmBcbiAgZmxvYXQ6IHJpZ2h0O1xuYDtcblxuZXhwb3J0IGNvbnN0IEhlYWRlciA9IHN0eWxlZC5oZWFkZXJgXG4gIGhlaWdodDogMzhweDtcbiAgYmFja2dyb3VuZDogIzM1MGQzNjtcbiAgY29sb3I6ICNmZmZmZmY7XG4gIGJveC1zaGFkb3c6IDAgMXB4IDAgMCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XG4gIHBhZGRpbmc6IDVweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuYDtcblxuZXhwb3J0IGNvbnN0IFByb2ZpbGVJbWcgPSBzdHlsZWQuaW1nYFxuICB3aWR0aDogMjhweDtcbiAgaGVpZ2h0OiAyOHB4O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogNXB4O1xuICByaWdodDogMTZweDtcbmA7XG5cbmV4cG9ydCBjb25zdCBQcm9maWxlTW9kYWwgPSBzdHlsZWQuZGl2YFxuICBwYWRkaW5nOiAyMHB4O1xuXG4gICYgaW1nIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICB9XG5cbiAgJiAjcHJvZmlsZS1uYW1lIHtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgfVxuXG4gICYgI3Byb2ZpbGUtYWN0aXZlIHtcbiAgICBmb250LXNpemU6IDEzcHg7XG4gICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBMb2dPdXRCdXR0b24gPSBzdHlsZWQuYnV0dG9uYFxuICBib3JkZXI6IG5vbmU7XG4gIHdpZHRoOiAxMDAlO1xuICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiKDI5LCAyOCwgMjkpO1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGhlaWdodDogMzNweDtcbiAgcGFkZGluZzogNXB4IDIwcHggNXB4O1xuICBvdXRsaW5lOiBub25lO1xuICBjdXJzb3I6IHBvaW50ZXI7XG5gO1xuXG5leHBvcnQgY29uc3QgV29ya3NwYWNlV3JhcHBlciA9IHN0eWxlZC5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IDE7XG5gO1xuXG5leHBvcnQgY29uc3QgV29ya3NwYWNlcyA9IHN0eWxlZC5kaXZgXG4gIHdpZHRoOiA2NXB4O1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgYmFja2dyb3VuZDogIzNmMGU0MDtcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYig4MiwgMzgsIDgzKTtcbiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiKDgyLCAzOCwgODMpO1xuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDE1cHggMCAwO1xuYDtcblxuZXhwb3J0IGNvbnN0IENoYW5uZWxzID0gc3R5bGVkLm5hdmBcbiAgd2lkdGg6IDI2MHB4O1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYmFja2dyb3VuZDogIzNmMGU0MDtcbiAgY29sb3I6IHJnYigxODgsIDE3MSwgMTg4KTtcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcblxuICAmIGEge1xuICAgIHBhZGRpbmctbGVmdDogMzZweDtcbiAgICBjb2xvcjogaW5oZXJpdDtcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgaGVpZ2h0OiAyOHB4O1xuICAgIGxpbmUtaGVpZ2h0OiAyOHB4O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAgICYuc2VsZWN0ZWQge1xuICAgICAgY29sb3I6IHdoaXRlO1xuICAgIH1cbiAgfVxuXG4gICYgLmJvbGQge1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgfVxuXG4gICYgLmNvdW50IHtcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICBiYWNrZ3JvdW5kOiAjY2QyNTUzO1xuICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBmb250LXdlaWdodDogNzAwO1xuICAgIGhlaWdodDogMThweDtcbiAgICBsaW5lLWhlaWdodDogMThweDtcbiAgICBwYWRkaW5nOiAwIDlweDtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgbWFyZ2luLXJpZ2h0OiAxNnB4O1xuICB9XG5cbiAgJiBoMiB7XG4gICAgaGVpZ2h0OiAzNnB4O1xuICAgIGxpbmUtaGVpZ2h0OiAzNnB4O1xuICAgIG1hcmdpbjogMDtcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgZm9udC1zaXplOiAxNXB4O1xuICB9XG5gO1xuXG5leHBvcnQgY29uc3QgV29ya3NwYWNlTmFtZSA9IHN0eWxlZC5idXR0b25gXG4gIGhlaWdodDogNjRweDtcbiAgbGluZS1oZWlnaHQ6IDY0cHg7XG4gIGJvcmRlcjogbm9uZTtcbiAgd2lkdGg6IDEwMCU7XG4gIHRleHQtYWxpZ246IGxlZnQ7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2IoODIsIDM4LCA4Myk7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2IoODIsIDM4LCA4Myk7XG4gIGZvbnQtd2VpZ2h0OiA5MDA7XG4gIGZvbnQtc2l6ZTogMjRweDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBwYWRkaW5nOiAwO1xuICBwYWRkaW5nLWxlZnQ6IDE2cHg7XG4gIG1hcmdpbjogMDtcbiAgY29sb3I6IHdoaXRlO1xuICBjdXJzb3I6IHBvaW50ZXI7XG5gO1xuXG5leHBvcnQgY29uc3QgTWVudVNjcm9sbCA9IHN0eWxlZC5kaXZgXG4gIGZsZXg6IDE7XG4gIG92ZXJmbG93LXk6IGF1dG87XG5gO1xuXG5leHBvcnQgY29uc3QgV29ya3NwYWNlTW9kYWwgPSBzdHlsZWQuZGl2YFxuICBwYWRkaW5nOiAxMHB4IDAgMDtcblxuICAmIGgyIHtcbiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG4gIH1cblxuICAmID4gYnV0dG9uIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDI4cHg7XG4gICAgcGFkZGluZzogNHB4O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiKDI4LCAyOSwgMjgpO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcblxuICAgICY6bGFzdC1vZi10eXBlIHtcbiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2IoMjgsIDI5LCAyOCk7XG4gICAgfVxuICB9XG5gO1xuXG5leHBvcnQgY29uc3QgQ2hhdHMgPSBzdHlsZWQuZGl2YFxuICBmbGV4OiAxO1xuYDtcblxuZXhwb3J0IGNvbnN0IEFkZEJ1dHRvbiA9IHN0eWxlZC5idXR0b25gXG4gIGNvbG9yOiB3aGl0ZTtcbiAgZm9udC1zaXplOiAyNHB4O1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHdpZHRoOiA0MHB4O1xuICBoZWlnaHQ6IDQwcHg7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBib3JkZXI6IG5vbmU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbmA7XG5cbmV4cG9ydCBjb25zdCBXb3Jrc3BhY2VCdXR0b24gPSBzdHlsZWQuYnV0dG9uYFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHdpZHRoOiA0MHB4O1xuICBoZWlnaHQ6IDQwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIGJhY2tncm91bmQ6IHdoaXRlO1xuICBib3JkZXI6IDNweCBzb2xpZCAjM2YwZTQwO1xuICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICBmb250LXNpemU6IDE4cHg7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIGNvbG9yOiBibGFjaztcbiAgY3Vyc29yOiBwb2ludGVyO1xuYDtcblxuZXhwb3J0IGNvbnN0IENvbGxhcHNlQnV0dG9uID0gc3R5bGVkLmJ1dHRvbjx7IGNvbGxhcHNlOiBib29sZWFuIH0+YFxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgYm9yZGVyOiBub25lO1xuICB3aWR0aDogMjZweDtcbiAgaGVpZ2h0OiAyNnB4O1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcblxuICAkeyh7IGNvbGxhcHNlIH0pID0+XG4gICAgY29sbGFwc2UgJiZcbiAgICBgXG4gICAgJiBpIHtcbiAgICAgIHRyYW5zZm9ybTogbm9uZTtcbiAgICB9XG4gIGB9O1xuYDtcbiIsImltcG9ydCB1c2VTb2NrZXQgZnJvbSAnQGhvb2tzL3VzZVNvY2tldCc7XG5pbXBvcnQgeyBDb2xsYXBzZUJ1dHRvbiB9IGZyb20gJ0BsYXlvdXRzL1dvcmtzcGFjZS9zdHlsZXMnO1xuaW1wb3J0IHsgSUNoYW5uZWwsIElDaGF0LCBJVXNlciB9IGZyb20gJ0B0eXBpbmdzL2RiJztcbmltcG9ydCBSZWFjdCwgeyBGQywgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuaW1wb3J0IHsgTmF2TGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBjaGFubmVsRGF0YT86IElDaGFubmVsW107XG4gIHVzZXJEYXRhPzogSVVzZXI7XG59XG5cbmNvbnN0IENoYW5uZWxMaXN0OiBGQzxQcm9wcz4gPSAoeyB1c2VyRGF0YSwgY2hhbm5lbERhdGEgfSkgPT4ge1xuICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdXNlUGFyYW1zPHsgd29ya3NwYWNlPzogc3RyaW5nIH0+KCk7XG4gIGNvbnN0IFtzb2NrZXRdID0gdXNlU29ja2V0KHdvcmtzcGFjZSk7XG4gIGNvbnN0IFtjaGFubmVsQ29sbGFwc2UsIHNldENoYW5uZWxDb2xsYXBzZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb3VudExpc3QsIHNldENvdW50TGlzdF0gPSB1c2VTdGF0ZTx7IFtrZXk6IHN0cmluZ106IG51bWJlciB8IHVuZGVmaW5lZCB9Pih7fSk7XG5cbiAgY29uc3QgdG9nZ2xlQ2hhbm5lbENvbGxhcHNlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldENoYW5uZWxDb2xsYXBzZSgocHJldikgPT4gIXByZXYpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgcmVzZXRDb3VudCA9IHVzZUNhbGxiYWNrKFxuICAgIChpZCkgPT4gKCkgPT4ge1xuICAgICAgc2V0Q291bnRMaXN0KChsaXN0KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ubGlzdCxcbiAgICAgICAgICBbaWRdOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtdLFxuICApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ3dvcmtzcGFjZSDrsJTqvIjri6QnLCB3b3Jrc3BhY2UpO1xuICAgIHNldENvdW50TGlzdCh7fSk7XG4gIH0sIFt3b3Jrc3BhY2VdKTtcblxuICBjb25zdCBvbk1lc3NhZ2UgPSAoZGF0YTogSUNoYXQpID0+IHtcbiAgICBjb25zb2xlLmxvZygnbWVzc2FnZeyZlOuLpCcsIGRhdGEpO1xuICAgIGNvbnN0IG1lbnRpb25zOiBzdHJpbmdbXSB8IG51bGwgPSBkYXRhLmNvbnRlbnQubWF0Y2goL0BcXFsoLis/KVxcXVxcKChcXGQpXFwpL2cpO1xuICAgIGlmIChtZW50aW9ucz8uZmluZCgodikgPT4gdi5tYXRjaCgvQFxcWyguKz8pXFxdXFwoKFxcZClcXCkvKSFbMl0gPT09IHVzZXJEYXRhPy5pZC50b1N0cmluZygpKSkge1xuICAgICAgcmV0dXJuIHNldENvdW50TGlzdCgobGlzdCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmxpc3QsXG4gICAgICAgICAgW2BjLSR7ZGF0YS5DaGFubmVsSWR9YF06IChsaXN0W2BjLSR7ZGF0YS5DaGFubmVsSWR9YF0gfHwgMCkgKyAxLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICAgIHNldENvdW50TGlzdCgobGlzdCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ubGlzdCxcbiAgICAgICAgW2BjLSR7ZGF0YS5DaGFubmVsSWR9YF06IGxpc3RbYGMtJHtkYXRhLkNoYW5uZWxJZH1gXSB8fCAwLFxuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNvY2tldD8ub24oJ21lc3NhZ2UnLCBvbk1lc3NhZ2UpO1xuICAgIGNvbnNvbGUubG9nKCdzb2NrZXQgb24gbWVzc2FnZScsIHNvY2tldD8uaGFzTGlzdGVuZXJzKCdtZXNzYWdlJyksIHNvY2tldCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHNvY2tldD8ub2ZmKCdtZXNzYWdlJywgb25NZXNzYWdlKTtcbiAgICAgIGNvbnNvbGUubG9nKCdzb2NrZXQgb2ZmIG1lc3NhZ2UnLCBzb2NrZXQ/Lmhhc0xpc3RlbmVycygnbWVzc2FnZScpKTtcbiAgICB9O1xuICB9LCBbc29ja2V0LCB1c2VyRGF0YV0pO1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxoMj5cbiAgICAgICAgPENvbGxhcHNlQnV0dG9uIGNvbGxhcHNlPXtjaGFubmVsQ29sbGFwc2V9IG9uQ2xpY2s9e3RvZ2dsZUNoYW5uZWxDb2xsYXBzZX0+XG4gICAgICAgICAgPGlcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImMtaWNvbiBwLWNoYW5uZWxfc2lkZWJhcl9fc2VjdGlvbl9oZWFkaW5nX2V4cGFuZCBwLWNoYW5uZWxfc2lkZWJhcl9fc2VjdGlvbl9oZWFkaW5nX2V4cGFuZC0tc2hvd19tb3JlX2ZlYXR1cmUgYy1pY29uLS1jYXJldC1yaWdodCBjLWljb24tLWluaGVyaXQgYy1pY29uLS1pbmxpbmVcIlxuICAgICAgICAgICAgZGF0YS1xYT1cImNoYW5uZWwtc2VjdGlvbi1jb2xsYXBzZVwiXG4gICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvQ29sbGFwc2VCdXR0b24+XG4gICAgICAgIDxzcGFuPkNoYW5uZWxzPC9zcGFuPlxuICAgICAgPC9oMj5cbiAgICAgIDxkaXY+XG4gICAgICAgIHshY2hhbm5lbENvbGxhcHNlICYmXG4gICAgICAgICAgY2hhbm5lbERhdGE/Lm1hcCgoY2hhbm5lbCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY291bnQgPSBjb3VudExpc3RbYGMtJHtjaGFubmVsLmlkfWBdO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPE5hdkxpbmtcbiAgICAgICAgICAgICAgICBrZXk9e2NoYW5uZWwubmFtZX1cbiAgICAgICAgICAgICAgICBhY3RpdmVDbGFzc05hbWU9XCJzZWxlY3RlZFwiXG4gICAgICAgICAgICAgICAgdG89e2Avd29ya3NwYWNlLyR7d29ya3NwYWNlfS9jaGFubmVsLyR7Y2hhbm5lbC5uYW1lfWB9XG4gICAgICAgICAgICAgICAgb25DbGljaz17cmVzZXRDb3VudChgYy0ke2NoYW5uZWwuaWR9YCl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2NvdW50ICE9PSB1bmRlZmluZWQgJiYgY291bnQgPj0gMCA/ICdib2xkJyA6IHVuZGVmaW5lZH0+IyB7Y2hhbm5lbC5uYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICB7Y291bnQgIT09IHVuZGVmaW5lZCAmJiBjb3VudCA+IDAgJiYgPHNwYW4gY2xhc3NOYW1lPVwiY291bnRcIj57Y291bnR9PC9zcGFuPn1cbiAgICAgICAgICAgICAgPC9OYXZMaW5rPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgIDwvZGl2PlxuICAgIDwvPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2hhbm5lbExpc3Q7XG4iLCJpbXBvcnQgdXNlU29ja2V0IGZyb20gJ0Bob29rcy91c2VTb2NrZXQnO1xuaW1wb3J0IHsgQ29sbGFwc2VCdXR0b24gfSBmcm9tICdAbGF5b3V0cy9Xb3Jrc3BhY2Uvc3R5bGVzJztcbmltcG9ydCB7IElETSwgSVVzZXIsIElVc2VyV2l0aE9ubGluZSB9IGZyb20gJ0B0eXBpbmdzL2RiJztcbmltcG9ydCBmZXRjaGVyIGZyb20gJ0B1dGlscy9mZXRjaGVyJztcbmltcG9ydCBSZWFjdCwgeyBGQywgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuaW1wb3J0IHsgTmF2TGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IHVzZVNXUiBmcm9tICdzd3InO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICB1c2VyRGF0YT86IElVc2VyO1xufVxuXG5jb25zdCBETUxpc3Q6IEZDPFByb3BzPiA9ICh7IHVzZXJEYXRhIH0pID0+IHtcbiAgY29uc3QgeyB3b3Jrc3BhY2UgfSA9IHVzZVBhcmFtczx7IHdvcmtzcGFjZT86IHN0cmluZyB9PigpO1xuICBjb25zdCB7IGRhdGE6IG1lbWJlckRhdGEgfSA9IHVzZVNXUjxJVXNlcldpdGhPbmxpbmVbXT4oXG4gICAgdXNlckRhdGEgPyBgL2FwaS93b3Jrc3BhY2UvJHt3b3Jrc3BhY2V9L21lbWJlcnNgIDogbnVsbCxcbiAgICBmZXRjaGVyLFxuICApO1xuICBjb25zdCBbc29ja2V0XSA9IHVzZVNvY2tldCh3b3Jrc3BhY2UpO1xuICBjb25zdCBbY2hhbm5lbENvbGxhcHNlLCBzZXRDaGFubmVsQ29sbGFwc2VdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY291bnRMaXN0LCBzZXRDb3VudExpc3RdID0gdXNlU3RhdGU8eyBba2V5OiBzdHJpbmddOiBudW1iZXIgfT4oe30pO1xuICBjb25zdCBbb25saW5lTGlzdCwgc2V0T25saW5lTGlzdF0gPSB1c2VTdGF0ZTxudW1iZXJbXT4oW10pO1xuXG4gIGNvbnN0IHRvZ2dsZUNoYW5uZWxDb2xsYXBzZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRDaGFubmVsQ29sbGFwc2UoKHByZXYpID0+ICFwcmV2KTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHJlc2V0Q291bnQgPSB1c2VDYWxsYmFjayhcbiAgICAoaWQpID0+ICgpID0+IHtcbiAgICAgIHNldENvdW50TGlzdCgobGlzdCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmxpc3QsXG4gICAgICAgICAgW2lkXTogMCxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW10sXG4gICk7XG5cbiAgY29uc3Qgb25NZXNzYWdlID0gKGRhdGE6IElETSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdkbeyZlOuLpCcsIGRhdGEpO1xuICAgIHNldENvdW50TGlzdCgobGlzdCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ubGlzdCxcbiAgICAgICAgW2RhdGEuU2VuZGVySWRdOiBsaXN0W2RhdGEuU2VuZGVySWRdID8gbGlzdFtkYXRhLlNlbmRlcklkXSArIDEgOiAxLFxuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCd3b3Jrc3BhY2Ug67CU6ryI64ukJywgd29ya3NwYWNlKTtcbiAgICBzZXRPbmxpbmVMaXN0KFtdKTtcbiAgICBzZXRDb3VudExpc3Qoe30pO1xuICB9LCBbd29ya3NwYWNlXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzb2NrZXQ/Lm9uKCdvbmxpbmVMaXN0JywgKGRhdGE6IG51bWJlcltdKSA9PiB7XG4gICAgICBzZXRPbmxpbmVMaXN0KGRhdGEpO1xuICAgIH0pO1xuICAgIHNvY2tldD8ub24oJ2RtJywgb25NZXNzYWdlKTtcbiAgICBjb25zb2xlLmxvZygnc29ja2V0IG9uIGRtJywgc29ja2V0Py5oYXNMaXN0ZW5lcnMoJ2RtJyksIHNvY2tldCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHNvY2tldD8ub2ZmKCdkbScsIG9uTWVzc2FnZSk7XG4gICAgICBjb25zb2xlLmxvZygnc29ja2V0IG9mZiBkbScsIHNvY2tldD8uaGFzTGlzdGVuZXJzKCdkbScpKTtcbiAgICAgIHNvY2tldD8ub2ZmKCdvbmxpbmVMaXN0Jyk7XG4gICAgfTtcbiAgfSwgW3NvY2tldF0pO1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxoMj5cbiAgICAgICAgPENvbGxhcHNlQnV0dG9uIGNvbGxhcHNlPXtjaGFubmVsQ29sbGFwc2V9IG9uQ2xpY2s9e3RvZ2dsZUNoYW5uZWxDb2xsYXBzZX0+XG4gICAgICAgICAgPGlcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImMtaWNvbiBwLWNoYW5uZWxfc2lkZWJhcl9fc2VjdGlvbl9oZWFkaW5nX2V4cGFuZCBwLWNoYW5uZWxfc2lkZWJhcl9fc2VjdGlvbl9oZWFkaW5nX2V4cGFuZC0tc2hvd19tb3JlX2ZlYXR1cmUgYy1pY29uLS1jYXJldC1yaWdodCBjLWljb24tLWluaGVyaXQgYy1pY29uLS1pbmxpbmVcIlxuICAgICAgICAgICAgZGF0YS1xYT1cImNoYW5uZWwtc2VjdGlvbi1jb2xsYXBzZVwiXG4gICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvQ29sbGFwc2VCdXR0b24+XG4gICAgICAgIDxzcGFuPkRpcmVjdCBNZXNzYWdlczwvc3Bhbj5cbiAgICAgIDwvaDI+XG4gICAgICA8ZGl2PlxuICAgICAgICB7IWNoYW5uZWxDb2xsYXBzZSAmJlxuICAgICAgICAgIG1lbWJlckRhdGE/Lm1hcCgobWVtYmVyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpc09ubGluZSA9IG9ubGluZUxpc3QuaW5jbHVkZXMobWVtYmVyLmlkKTtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gY291bnRMaXN0W21lbWJlci5pZF0gfHwgMDtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxOYXZMaW5rXG4gICAgICAgICAgICAgICAga2V5PXttZW1iZXIuaWR9XG4gICAgICAgICAgICAgICAgYWN0aXZlQ2xhc3NOYW1lPVwic2VsZWN0ZWRcIlxuICAgICAgICAgICAgICAgIHRvPXtgL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vZG0vJHttZW1iZXIuaWR9YH1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtyZXNldENvdW50KG1lbWJlci5pZCl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8aVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgYy1pY29uIHAtY2hhbm5lbF9zaWRlYmFyX19wcmVzZW5jZV9pY29uIHAtY2hhbm5lbF9zaWRlYmFyX19wcmVzZW5jZV9pY29uLS1kaW1fZW5hYmxlZCBjLXByZXNlbmNlICR7XG4gICAgICAgICAgICAgICAgICAgIGlzT25saW5lID8gJ2MtcHJlc2VuY2UtLWFjdGl2ZSBjLWljb24tLXByZXNlbmNlLW9ubGluZScgOiAnYy1pY29uLS1wcmVzZW5jZS1vZmZsaW5lJ1xuICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgICAgICAgICAgZGF0YS1xYT1cInByZXNlbmNlX2luZGljYXRvclwiXG4gICAgICAgICAgICAgICAgICBkYXRhLXFhLXByZXNlbmNlLXNlbGY9XCJmYWxzZVwiXG4gICAgICAgICAgICAgICAgICBkYXRhLXFhLXByZXNlbmNlLWFjdGl2ZT1cImZhbHNlXCJcbiAgICAgICAgICAgICAgICAgIGRhdGEtcWEtcHJlc2VuY2UtZG5kPVwiZmFsc2VcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtjb3VudCA+IDAgPyAnYm9sZCcgOiB1bmRlZmluZWR9PnttZW1iZXIubmlja25hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgIHttZW1iZXIuaWQgPT09IHVzZXJEYXRhPy5pZCAmJiA8c3Bhbj4gKOuCmCk8L3NwYW4+fVxuICAgICAgICAgICAgICAgIHtjb3VudCA+IDAgJiYgPHNwYW4gY2xhc3NOYW1lPVwiY291bnRcIj57Y291bnR9PC9zcGFuPn1cbiAgICAgICAgICAgICAgPC9OYXZMaW5rPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgIDwvZGl2PlxuICAgIDwvPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRE1MaXN0O1xuIiwiaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuXG5leHBvcnQgY29uc3QgQ3JlYXRlTWVudSA9IHN0eWxlZC5kaXZgXG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgdG9wOiAwO1xuICByaWdodDogMDtcbiAgbGVmdDogMDtcbiAgYm90dG9tOiAwO1xuICB6LWluZGV4OiAxMDAwO1xuXG4gICYgPiBkaXYge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgLS1zYWYtMDogcmdiYSh2YXIoLS1za19mb3JlZ3JvdW5kX2xvdywgMjksIDI4LCAyOSksIDAuMTMpO1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1zYWYtMCksIDAgNHB4IDEycHggMCByZ2JhKDAsIDAsIDAsIDAuMTIpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEodmFyKC0tc2tfZm9yZWdyb3VuZF9taW5fc29saWQsIDI0OCwgMjQ4LCAyNDgpLCAxKTtcbiAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgbWluLXdpZHRoOiAzNjBweDtcbiAgICB6LWluZGV4OiA1MTI7XG4gICAgbWF4LWhlaWdodDogY2FsYygxMDB2aCAtIDIwcHgpO1xuICAgIGNvbG9yOiByZ2IoMjksIDI4LCAyOSk7XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBDbG9zZU1vZGFsQnV0dG9uID0gc3R5bGVkLmJ1dHRvbmBcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogMTBweDtcbiAgdG9wOiA2cHg7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBib3JkZXI6IG5vbmU7XG4gIGZvbnQtc2l6ZTogMzBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuYDtcbiIsImltcG9ydCB7IENyZWF0ZU1lbnUsIENsb3NlTW9kYWxCdXR0b24gfSBmcm9tICdAY29tcG9uZW50cy9NZW51L3N0eWxlcyc7XG5pbXBvcnQgUmVhY3QsIHsgQ1NTUHJvcGVydGllcywgRkMsIFByb3BzV2l0aENoaWxkcmVuLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgc2hvdzogYm9vbGVhbjtcbiAgb25DbG9zZU1vZGFsOiAoKSA9PiB2b2lkO1xuICBzdHlsZTogQ1NTUHJvcGVydGllcztcbiAgY2xvc2VCdXR0b24/OiBib29sZWFuO1xufVxuXG5jb25zdCBNZW51OiBGQzxQcm9wc1dpdGhDaGlsZHJlbjxQcm9wcz4+ID0gKHsgY2xvc2VCdXR0b24sIHN0eWxlLCBzaG93LCBjaGlsZHJlbiwgb25DbG9zZU1vZGFsIH0pID0+IHtcbiAgY29uc3Qgc3RvcFByb3BhZ2F0aW9uID0gdXNlQ2FsbGJhY2soKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICB9LCBbXSk7XG5cbiAgaWYgKCFzaG93KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIChcbiAgICA8Q3JlYXRlTWVudSBvbkNsaWNrPXtvbkNsb3NlTW9kYWx9PlxuICAgICAgPGRpdiBvbkNsaWNrPXtzdG9wUHJvcGFnYXRpb259IHN0eWxlPXtzdHlsZX0+XG4gICAgICAgIHtjbG9zZUJ1dHRvbiAmJiA8Q2xvc2VNb2RhbEJ1dHRvbiBvbkNsaWNrPXtvbkNsb3NlTW9kYWx9PiZ0aW1lczs8L0Nsb3NlTW9kYWxCdXR0b24+fVxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8L2Rpdj5cbiAgICA8L0NyZWF0ZU1lbnU+XG4gICk7XG59O1xuTWVudS5kZWZhdWx0UHJvcHMgPSB7XG4gIGNsb3NlQnV0dG9uOiB0cnVlLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgTWVudTtcbiIsImltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJztcblxuZXhwb3J0IGNvbnN0IENyZWF0ZU1vZGFsID0gc3R5bGVkLmRpdmBcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGxlZnQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgdG9wOiAwO1xuICByaWdodDogMDtcbiAgei1pbmRleDogMTAyMjtcblxuICAmID4gZGl2IHtcbiAgICBtYXJnaW4tdG9wOiAyMDBweDtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgd2lkdGg6IDQ0MHB4O1xuICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgIC0tc2FmLTA6IHJnYmEodmFyKC0tc2tfZm9yZWdyb3VuZF9sb3csIDI5LCAyOCwgMjkpLCAwLjEzKTtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tc2FmLTApLCAwIDRweCAxMnB4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKHZhcigtLXNrX2ZvcmVncm91bmRfbWluX3NvbGlkLCAyNDgsIDI0OCwgMjQ4KSwgMSk7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgIG1heC13aWR0aDogNDQwcHg7XG4gICAgcGFkZGluZzogMzBweCA0MHB4IDA7XG4gICAgei1pbmRleDogMTAxMjtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBDbG9zZU1vZGFsQnV0dG9uID0gc3R5bGVkLmJ1dHRvbmBcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogMTBweDtcbiAgdG9wOiA2cHg7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBib3JkZXI6IG5vbmU7XG4gIGZvbnQtc2l6ZTogMzBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuYDtcbiIsImltcG9ydCB7IENyZWF0ZU1vZGFsLCBDbG9zZU1vZGFsQnV0dG9uIH0gZnJvbSAnQGNvbXBvbmVudHMvTW9kYWwvc3R5bGVzJztcbmltcG9ydCBSZWFjdCwgeyBGQywgUHJvcHNXaXRoQ2hpbGRyZW4sIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBzaG93OiBib29sZWFuO1xuICBvbkNsb3NlTW9kYWw6ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IE1vZGFsOiBGQzxQcm9wc1dpdGhDaGlsZHJlbjxQcm9wcz4+ID0gKHsgc2hvdywgY2hpbGRyZW4sIG9uQ2xvc2VNb2RhbCB9KSA9PiB7XG4gIGNvbnN0IHN0b3BQcm9wYWdhdGlvbiA9IHVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfSwgW10pO1xuXG4gIGlmICghc2hvdykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAoXG4gICAgPENyZWF0ZU1vZGFsIG9uQ2xpY2s9e29uQ2xvc2VNb2RhbH0+XG4gICAgICA8ZGl2IG9uQ2xpY2s9e3N0b3BQcm9wYWdhdGlvbn0+XG4gICAgICAgIDxDbG9zZU1vZGFsQnV0dG9uIG9uQ2xpY2s9e29uQ2xvc2VNb2RhbH0+JnRpbWVzOzwvQ2xvc2VNb2RhbEJ1dHRvbj5cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC9kaXY+XG4gICAgPC9DcmVhdGVNb2RhbD5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE1vZGFsO1xuIiwiaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuaW1wb3J0IHsgTWVudGlvbnNJbnB1dCB9IGZyb20gJ3JlYWN0LW1lbnRpb25zJztcblxuZXhwb3J0IGNvbnN0IENoYXRBcmVhID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgd2lkdGg6IDEwMCU7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIHBhZGRpbmctdG9wOiAwO1xuYDtcblxuZXhwb3J0IGNvbnN0IEZvcm0gPSBzdHlsZWQuZm9ybWBcbiAgY29sb3I6IHJnYigyOSwgMjgsIDI5KTtcbiAgZm9udC1zaXplOiAxNXB4O1xuICB3aWR0aDogMTAwJTtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBib3JkZXI6IDFweCBzb2xpZCByZ2IoMjksIDI4LCAyOSk7XG5gO1xuXG5leHBvcnQgY29uc3QgTWVudGlvbnNUZXh0YXJlYSA9IHN0eWxlZChNZW50aW9uc0lucHV0KWBcbiAgZm9udC1mYW1pbHk6IFNsYWNrLUxhdG8sIGFwcGxlTG9nbywgc2Fucy1zZXJpZjtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBwYWRkaW5nOiA4cHggOXB4O1xuXG4gICYgc3Ryb25nIHtcbiAgICBiYWNrZ3JvdW5kOiBza3libHVlO1xuICB9XG5cbiAgJiB0ZXh0YXJlYSB7XG4gICAgaGVpZ2h0OiA0NHB4O1xuICAgIHBhZGRpbmc6IDlweCAxMHB4ICFpbXBvcnRhbnQ7XG4gICAgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50O1xuICAgIGJvcmRlci1yYWRpdXM6IDRweCAhaW1wb3J0YW50O1xuICAgIHJlc2l6ZTogbm9uZSAhaW1wb3J0YW50O1xuICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgfVxuXG4gICYgdWwge1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIGxpZ2h0Z3JheTtcbiAgICBtYXgtaGVpZ2h0OiAyMDBweDtcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgIHBhZGRpbmc6IDlweCAxMHB4O1xuICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICB3aWR0aDogMTUwcHg7XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBUb29sYm94ID0gc3R5bGVkLmRpdmBcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBiYWNrZ3JvdW5kOiByZ2IoMjQ4LCAyNDgsIDI0OCk7XG4gIGhlaWdodDogNDFweDtcbiAgZGlzcGxheTogZmxleDtcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYigyMjEsIDIyMSwgMjIxKTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogNHB4O1xuICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNHB4O1xuYDtcblxuZXhwb3J0IGNvbnN0IFNlbmRCdXR0b24gPSBzdHlsZWQuYnV0dG9uYFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiA1cHg7XG4gIHRvcDogNXB4O1xuYDtcblxuZXhwb3J0IGNvbnN0IEVhY2hNZW50aW9uID0gc3R5bGVkLmJ1dHRvbjx7IGZvY3VzOiBib29sZWFuIH0+YFxuICBwYWRkaW5nOiA0cHggMjBweDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGJvcmRlcjogbm9uZTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY29sb3I6IHJnYigyOCwgMjksIDI4KTtcbiAgd2lkdGg6IDEwMCU7XG5cbiAgJiBpbWcge1xuICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICB9XG5cbiAgJHsoeyBmb2N1cyB9KSA9PlxuICAgIGZvY3VzICYmXG4gICAgYFxuICAgIGJhY2tncm91bmQ6ICMxMjY0YTM7XG4gICAgY29sb3I6IHdoaXRlO1xuICBgfTtcbmA7XG4iLCJpbXBvcnQgeyBDaGF0QXJlYSwgRm9ybSwgTWVudGlvbnNUZXh0YXJlYSwgU2VuZEJ1dHRvbiwgVG9vbGJveCwgRWFjaE1lbnRpb24gfSBmcm9tICdAY29tcG9uZW50cy9DaGF0Qm94L3N0eWxlcyc7XG5pbXBvcnQgeyBJVXNlciB9IGZyb20gJ0B0eXBpbmdzL2RiJztcbmltcG9ydCBhdXRvc2l6ZSBmcm9tICdhdXRvc2l6ZSc7XG5pbXBvcnQgZ3JhdmF0YXIgZnJvbSAnZ3JhdmF0YXInO1xuaW1wb3J0IFJlYWN0LCB7IEZDLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBNZW50aW9uLCBTdWdnZXN0aW9uRGF0YUl0ZW0gfSBmcm9tICdyZWFjdC1tZW50aW9ucyc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIG9uU3VibWl0Rm9ybTogKGU6IGFueSkgPT4gdm9pZDtcbiAgY2hhdD86IHN0cmluZztcbiAgb25DaGFuZ2VDaGF0OiAoZTogYW55KSA9PiB2b2lkO1xuICBwbGFjZWhvbGRlcjogc3RyaW5nO1xuICBkYXRhPzogSVVzZXJbXTtcbn1cbmNvbnN0IENoYXRCb3g6IEZDPFByb3BzPiA9ICh7IG9uU3VibWl0Rm9ybSwgY2hhdCwgb25DaGFuZ2VDaGF0LCBwbGFjZWhvbGRlciwgZGF0YSB9KSA9PiB7XG4gIGNvbnN0IHRleHRhcmVhUmVmID0gdXNlUmVmPEhUTUxUZXh0QXJlYUVsZW1lbnQ+KG51bGwpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0ZXh0YXJlYVJlZi5jdXJyZW50KSB7XG4gICAgICBhdXRvc2l6ZSh0ZXh0YXJlYVJlZi5jdXJyZW50KTtcbiAgICB9XG4gIH0sIFt0ZXh0YXJlYVJlZi5jdXJyZW50XSk7XG5cbiAgY29uc3Qgb25LZXlkb3duQ2hhdCA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgaWYgKCFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIG9uU3VibWl0Rm9ybShlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgW2NoYXRdLFxuICApO1xuXG4gIGNvbnN0IHJlbmRlclVzZXJTdWdnZXN0aW9uOiAoXG4gICAgc3VnZ2VzdGlvbjogU3VnZ2VzdGlvbkRhdGFJdGVtLFxuICAgIHNlYXJjaDogc3RyaW5nLFxuICAgIGhpZ2hsaWdodGVkRGlzcGxheTogUmVhY3QuUmVhY3ROb2RlLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgZm9jdXNlZDogYm9vbGVhbixcbiAgKSA9PiBSZWFjdC5SZWFjdE5vZGUgPSB1c2VDYWxsYmFjayhcbiAgICAobWVtYmVyLCBzZWFyY2gsIGhpZ2hsaWdodGVkRGlzcGxheSwgaW5kZXgsIGZvY3VzKSA9PiB7XG4gICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8RWFjaE1lbnRpb24gZm9jdXM9e2ZvY3VzfT5cbiAgICAgICAgICA8aW1nIHNyYz17Z3JhdmF0YXIudXJsKGRhdGFbaW5kZXhdLmVtYWlsLCB7IHM6ICcyMHB4JyB9KX0gYWx0PXtkYXRhW2luZGV4XS5uaWNrbmFtZX0gLz5cbiAgICAgICAgICA8c3Bhbj57aGlnaGxpZ2h0ZWREaXNwbGF5fTwvc3Bhbj5cbiAgICAgICAgPC9FYWNoTWVudGlvbj5cbiAgICAgICk7XG4gICAgfSxcbiAgICBbZGF0YV0sXG4gICk7XG5cbiAgcmV0dXJuIChcbiAgICA8Q2hhdEFyZWE+XG4gICAgICA8Rm9ybSBvblN1Ym1pdD17b25TdWJtaXRGb3JtfT5cbiAgICAgICAgPE1lbnRpb25zVGV4dGFyZWFcbiAgICAgICAgICBpZD1cImVkaXRvci1jaGF0XCJcbiAgICAgICAgICB2YWx1ZT17Y2hhdH1cbiAgICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2VDaGF0fVxuICAgICAgICAgIG9uS2V5UHJlc3M9e29uS2V5ZG93bkNoYXR9XG4gICAgICAgICAgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxuICAgICAgICAgIGlucHV0UmVmPXt0ZXh0YXJlYVJlZn1cbiAgICAgICAgICBhbGxvd1N1Z2dlc3Rpb25zQWJvdmVDdXJzb3JcbiAgICAgICAgPlxuICAgICAgICAgIDxNZW50aW9uXG4gICAgICAgICAgICBhcHBlbmRTcGFjZU9uQWRkXG4gICAgICAgICAgICB0cmlnZ2VyPVwiQFwiXG4gICAgICAgICAgICBkYXRhPXtkYXRhPy5tYXAoKHYpID0+ICh7IGlkOiB2LmlkLCBkaXNwbGF5OiB2Lm5pY2tuYW1lIH0pKSB8fCBbXX1cbiAgICAgICAgICAgIHJlbmRlclN1Z2dlc3Rpb249e3JlbmRlclVzZXJTdWdnZXN0aW9ufVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvTWVudGlvbnNUZXh0YXJlYT5cbiAgICAgICAgPFRvb2xib3g+XG4gICAgICAgICAgPFNlbmRCdXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17XG4gICAgICAgICAgICAgICdjLWJ1dHRvbi11bnN0eWxlZCBjLWljb25fYnV0dG9uIGMtaWNvbl9idXR0b24tLWxpZ2h0IGMtaWNvbl9idXR0b24tLXNpemVfbWVkaXVtIGMtdGV4dHlfaW5wdXRfX2J1dHRvbiBjLXRleHR5X2lucHV0X19idXR0b24tLXNlbmQnICtcbiAgICAgICAgICAgICAgKGNoYXQ/LnRyaW0oKSA/ICcnIDogJyBjLXRleHR5X2lucHV0X19idXR0b24tLWRpc2FibGVkJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGEtcWE9XCJ0ZXh0eV9zZW5kX2J1dHRvblwiXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiU2VuZCBtZXNzYWdlXCJcbiAgICAgICAgICAgIGRhdGEtc2s9XCJ0b29sdGlwX3BhcmVudFwiXG4gICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgIGRpc2FibGVkPXshY2hhdD8udHJpbSgpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImMtaWNvbiBjLWljb24tLXBhcGVycGxhbmUtZmlsbGVkXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgICA8L1NlbmRCdXR0b24+XG4gICAgICAgIDwvVG9vbGJveD5cbiAgICAgIDwvRm9ybT5cbiAgICA8L0NoYXRBcmVhPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2hhdEJveDtcbiIsImltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJztcblxuZXhwb3J0IGNvbnN0IENoYXRXcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgcGFkZGluZzogOHB4IDIwcHg7XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogI2VlZTtcbiAgfVxuXG4gICYgPiBkaXY6Zmlyc3Qtb2YtdHlwZSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICB3aWR0aDogMzZweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDhweDtcblxuICAgICYgaW1nIHtcbiAgICAgIHdpZHRoOiAzNnB4O1xuICAgICAgaGVpZ2h0OiAzNnB4O1xuICAgIH1cbiAgfVxuXG4gICYgPiBkaXY6bGFzdC1vZi10eXBlIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXg6IDE7XG4gIH1cblxuICAmIGEge1xuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICBjb2xvcjogZGVlcHNreWJsdWU7XG4gIH1cbmA7XG4iLCJpbXBvcnQgeyBDaGF0V3JhcHBlciB9IGZyb20gJ0Bjb21wb25lbnRzL0NoYXQvc3R5bGVzJztcbmltcG9ydCB7IElDaGF0LCBJRE0sIElVc2VyIH0gZnJvbSAnQHR5cGluZ3MvZGInO1xuaW1wb3J0IGRheWpzIGZyb20gJ2RheWpzJztcbmltcG9ydCBncmF2YXRhciBmcm9tICdncmF2YXRhcic7XG5pbXBvcnQgUmVhY3QsIHsgRkMsIHVzZU1lbW8sIG1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IHJlZ2V4aWZ5U3RyaW5nIGZyb20gJ3JlZ2V4aWZ5LXN0cmluZyc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGRhdGE6IElETSB8IElDaGF0O1xufVxuXG5jb25zdCBDaGF0OiBGQzxQcm9wcz4gPSBtZW1vKCh7IGRhdGEgfSkgPT4ge1xuICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdXNlUGFyYW1zPHsgd29ya3NwYWNlOiBzdHJpbmc7IGNoYW5uZWw6IHN0cmluZyB9PigpO1xuICBjb25zdCB1c2VyOiBJVXNlciA9ICdTZW5kZXInIGluIGRhdGEgPyBkYXRhLlNlbmRlciA6IGRhdGEuVXNlcjtcblxuICBjb25zdCByZXN1bHQgPSB1c2VNZW1vPChzdHJpbmcgfCBKU1guRWxlbWVudClbXT4oXG4gICAgKCkgPT5cbiAgICAgIHJlZ2V4aWZ5U3RyaW5nKHtcbiAgICAgICAgcGF0dGVybjogL0BcXFsoLis/KVxcXVxcKChcXGQpXFwpfFxcbi9nLFxuICAgICAgICBkZWNvcmF0b3IobWF0Y2gsIGluZGV4KSB7XG4gICAgICAgICAgY29uc3QgYXJyOiBzdHJpbmdbXSB8IG51bGwgPSBtYXRjaC5tYXRjaCgvQFxcWyguKz8pXFxdXFwoKFxcZClcXCkvKSE7XG4gICAgICAgICAgaWYgKGFycikge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPExpbmsga2V5PXttYXRjaCArIGluZGV4fSB0bz17YC93b3Jrc3BhY2UvJHt3b3Jrc3BhY2V9L2RtLyR7YXJyWzJdfWB9PlxuICAgICAgICAgICAgICAgIEB7YXJyWzFdfVxuICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gPGJyIGtleT17aW5kZXh9IC8+O1xuICAgICAgICB9LFxuICAgICAgICBpbnB1dDogZGF0YS5jb250ZW50LFxuICAgICAgfSksXG4gICAgW2RhdGEuY29udGVudF0sXG4gICk7XG4gIHJldHVybiAoXG4gICAgPENoYXRXcmFwcGVyPlxuICAgICAgPGRpdj5cbiAgICAgICAgPGltZyBzcmM9e2dyYXZhdGFyLnVybCh1c2VyLmVtYWlsLCB7IHM6ICczNnB4JyB9KX0gYWx0PXt1c2VyLm5pY2tuYW1lfSAvPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IHN0eWxlPXt7IGZsZXhXcmFwOiAnd3JhcCcgfX0+XG4gICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4OiAnMCAwIDEwMCUnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJyB9fT5cbiAgICAgICAgICA8YiBzdHlsZT17eyBtYXJnaW5SaWdodDogNSB9fT57dXNlci5uaWNrbmFtZX08L2I+XG4gICAgICAgICAgPHNwYW4gc3R5bGU9e3sgZm9udFNpemU6IDEyIH19PntkYXlqcyhkYXRhLmNyZWF0ZWRBdCkuZm9ybWF0KCdoOm1tIEEnKX08L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8cCBzdHlsZT17eyBmbGV4OiAnMCAwIDEwMCUnLCBtYXJnaW46IDAgfX0+e3Jlc3VsdH08L3A+XG4gICAgICA8L2Rpdj5cbiAgICA8L0NoYXRXcmFwcGVyPlxuICApO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IENoYXQ7XG4iLCJpbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5cbmV4cG9ydCBjb25zdCBDaGF0Wm9uZSA9IHN0eWxlZC5kaXZgXG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4OiAxO1xuYDtcblxuZXhwb3J0IGNvbnN0IFNlY3Rpb24gPSBzdHlsZWQuc2VjdGlvbmBcbiAgbWFyZ2luLXRvcDogMjBweDtcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7XG5gO1xuXG5leHBvcnQgY29uc3QgU3RpY2t5SGVhZGVyID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGZsZXg6IDE7XG4gIHdpZHRoOiAxMDAlO1xuICBwb3NpdGlvbjogc3RpY2t5O1xuICB0b3A6IDE0cHg7XG5cbiAgJiBidXR0b24ge1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICBoZWlnaHQ6IDI4cHg7XG4gICAgbGluZS1oZWlnaHQ6IDI3cHg7XG4gICAgcGFkZGluZzogMCAxNnB4O1xuICAgIHotaW5kZXg6IDI7XG4gICAgLS1zYWYtMDogcmdiYSh2YXIoLS1za19mb3JlZ3JvdW5kX2xvdywgMjksIDI4LCAyOSksIDAuMTMpO1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1zYWYtMCksIDAgMXB4IDNweCAwIHJnYmEoMCwgMCwgMCwgMC4wOCk7XG4gICAgYm9yZGVyLXJhZGl1czogMjRweDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgdG9wOiAtMTNweDtcbiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgb3V0bGluZTogbm9uZTtcbiAgfVxuYDtcbiIsImltcG9ydCBDaGF0IGZyb20gJ0Bjb21wb25lbnRzL0NoYXQnO1xuaW1wb3J0IHsgQ2hhdFpvbmUsIFNlY3Rpb24sIFN0aWNreUhlYWRlciB9IGZyb20gJ0Bjb21wb25lbnRzL0NoYXRMaXN0L3N0eWxlcyc7XG5pbXBvcnQgeyBJQ2hhdCwgSURNIH0gZnJvbSAnQHR5cGluZ3MvZGInO1xuaW1wb3J0IFJlYWN0LCB7IEZDLCBSZWZPYmplY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU2Nyb2xsYmFycyB9IGZyb20gJ3JlYWN0LWN1c3RvbS1zY3JvbGxiYXJzJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgc2Nyb2xsYmFyUmVmOiBSZWZPYmplY3Q8U2Nyb2xsYmFycz47XG4gIGlzUmVhY2hpbmdFbmQ/OiBib29sZWFuO1xuICBpc0VtcHR5OiBib29sZWFuO1xuICBjaGF0U2VjdGlvbnM6IHsgW2tleTogc3RyaW5nXTogKElETSB8IElDaGF0KVtdIH07XG4gIHNldFNpemU6IChmOiAoc2l6ZTogbnVtYmVyKSA9PiBudW1iZXIpID0+IFByb21pc2U8KElETSB8IElDaGF0KVtdW10gfCB1bmRlZmluZWQ+O1xufVxuY29uc3QgQ2hhdExpc3Q6IEZDPFByb3BzPiA9ICh7IHNjcm9sbGJhclJlZiwgaXNSZWFjaGluZ0VuZCwgaXNFbXB0eSwgY2hhdFNlY3Rpb25zLCBzZXRTaXplIH0pID0+IHtcbiAgY29uc3Qgb25TY3JvbGwgPSB1c2VDYWxsYmFjayhcbiAgICAodmFsdWVzKSA9PiB7XG4gICAgICBpZiAodmFsdWVzLnNjcm9sbFRvcCA9PT0gMCAmJiAhaXNSZWFjaGluZ0VuZCAmJiAhaXNFbXB0eSkge1xuICAgICAgICBzZXRTaXplKChzaXplKSA9PiBzaXplICsgMSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgc2Nyb2xsYmFyUmVmLmN1cnJlbnQ/LnNjcm9sbFRvcChzY3JvbGxiYXJSZWYuY3VycmVudD8uZ2V0U2Nyb2xsSGVpZ2h0KCkgLSB2YWx1ZXMuc2Nyb2xsSGVpZ2h0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbaXNSZWFjaGluZ0VuZCwgaXNFbXB0eV0sXG4gICk7XG5cbiAgcmV0dXJuIChcbiAgICA8Q2hhdFpvbmU+XG4gICAgICA8U2Nyb2xsYmFycyBhdXRvSGlkZSByZWY9e3Njcm9sbGJhclJlZn0gb25TY3JvbGxGcmFtZT17b25TY3JvbGx9PlxuICAgICAgICB7T2JqZWN0LmVudHJpZXMoY2hhdFNlY3Rpb25zKS5tYXAoKFtkYXRlLCBjaGF0c10pID0+IHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFNlY3Rpb24gY2xhc3NOYW1lPXtgc2VjdGlvbi0ke2RhdGV9YH0ga2V5PXtkYXRlfT5cbiAgICAgICAgICAgICAgPFN0aWNreUhlYWRlcj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uPntkYXRlfTwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L1N0aWNreUhlYWRlcj5cbiAgICAgICAgICAgICAge2NoYXRzLm1hcCgoY2hhdCkgPT4gKFxuICAgICAgICAgICAgICAgIDxDaGF0IGtleT17Y2hhdC5pZH0gZGF0YT17Y2hhdH0gLz5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L1NlY3Rpb24+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSl9XG4gICAgICA8L1Njcm9sbGJhcnM+XG4gICAgPC9DaGF0Wm9uZT5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENoYXRMaXN0O1xuIiwiaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuXG5leHBvcnQgY29uc3QgSGVhZGVyID0gc3R5bGVkLmhlYWRlcmBcbiAgaGVpZ2h0OiA2NHB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICB3aWR0aDogMTAwJTtcbiAgLS1zYWYtMDogcmdiYSh2YXIoLS1za19mb3JlZ3JvdW5kX2xvdywgMjksIDI4LCAyOSksIDAuMTMpO1xuICBib3gtc2hhZG93OiAwIDFweCAwIHZhcigtLXNhZi0wKTtcbiAgcGFkZGluZzogMjBweCAxNnB4IDIwcHggMjBweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5gO1xuIiwiaW1wb3J0IHsgSUNoYXQsIElETSB9IGZyb20gJ0B0eXBpbmdzL2RiJztcbmltcG9ydCBkYXlqcyBmcm9tICdkYXlqcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1ha2VTZWN0aW9uPFQgZXh0ZW5kcyBJRE0gfCBJQ2hhdD4oY2hhdExpc3Q6IFRbXSkge1xuICBjb25zdCBzZWN0aW9uczogeyBba2V5OiBzdHJpbmddOiBUW10gfSA9IHt9O1xuICBjaGF0TGlzdC5mb3JFYWNoKChjaGF0KSA9PiB7XG4gICAgY29uc3QgbW9udGhEYXRlID0gZGF5anMoY2hhdC5jcmVhdGVkQXQpLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHNlY3Rpb25zW21vbnRoRGF0ZV0pKSB7XG4gICAgICBzZWN0aW9uc1ttb250aERhdGVdLnB1c2goY2hhdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlY3Rpb25zW21vbnRoRGF0ZV0gPSBbY2hhdF07XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHNlY3Rpb25zO1xufVxuIiwiaW1wb3J0IENoYXRCb3ggZnJvbSAnQGNvbXBvbmVudHMvQ2hhdEJveCc7XG5pbXBvcnQgQ2hhdExpc3QgZnJvbSAnQGNvbXBvbmVudHMvQ2hhdExpc3QnO1xuaW1wb3J0IE1vZGFsIGZyb20gJ0Bjb21wb25lbnRzL01vZGFsJztcbmltcG9ydCB1c2VJbnB1dCBmcm9tICdAaG9va3MvdXNlSW5wdXQnO1xuaW1wb3J0IHVzZVNvY2tldCBmcm9tICdAaG9va3MvdXNlU29ja2V0JztcbmltcG9ydCB7IEhlYWRlciB9IGZyb20gJ0BwYWdlcy9DaGFubmVsL3N0eWxlcyc7XG5pbXBvcnQgeyBCdXR0b24sIElucHV0LCBMYWJlbCB9IGZyb20gJ0BwYWdlcy9TaWduVXAvc3R5bGVzJztcbmltcG9ydCB7IElDaGFubmVsLCBJQ2hhdCwgSVVzZXIgfSBmcm9tICdAdHlwaW5ncy9kYic7XG5pbXBvcnQgZmV0Y2hlciBmcm9tICdAdXRpbHMvZmV0Y2hlcic7XG5pbXBvcnQgbWFrZVNlY3Rpb24gZnJvbSAnQHV0aWxzL21ha2VTZWN0aW9uJztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFNjcm9sbGJhcnMgfSBmcm9tICdyZWFjdC1jdXN0b20tc2Nyb2xsYmFycyc7XG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuaW1wb3J0IHsgUmVkaXJlY3QgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcbmltcG9ydCB7IHRvYXN0LCBUb2FzdENvbnRhaW5lciB9IGZyb20gJ3JlYWN0LXRvYXN0aWZ5JztcbmltcG9ydCB1c2VTV1IsIHsgdXNlU1dSSW5maW5pdGUgfSBmcm9tICdzd3InO1xuXG5jb25zdCBQQUdFX1NJWkUgPSAyMDtcbmNvbnN0IENoYW5uZWwgPSAoKSA9PiB7XG4gIGNvbnN0IHsgd29ya3NwYWNlLCBjaGFubmVsIH0gPSB1c2VQYXJhbXM8eyB3b3Jrc3BhY2U6IHN0cmluZzsgY2hhbm5lbDogc3RyaW5nIH0+KCk7XG4gIGNvbnN0IFtzb2NrZXRdID0gdXNlU29ja2V0KHdvcmtzcGFjZSk7XG4gIGNvbnN0IHsgZGF0YTogdXNlckRhdGEsIHJldmFsaWRhdGUgfSA9IHVzZVNXUjxJVXNlcj4oJy9hcGkvdXNlcicsIGZldGNoZXIpO1xuICBjb25zdCB7IGRhdGE6IGNoYW5uZWxzRGF0YSB9ID0gdXNlU1dSPElDaGFubmVsW10+KGAvYXBpL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vY2hhbm5lbHNgLCBmZXRjaGVyKTtcbiAgY29uc3QgY2hhbm5lbERhdGEgPSBjaGFubmVsc0RhdGE/LmZpbmQoKHYpID0+IHYubmFtZSA9PT0gY2hhbm5lbCk7XG4gIGNvbnN0IHsgZGF0YTogY2hhdERhdGEsIHJldmFsaWRhdGU6IHJldmFsaWRhdGVDaGF0LCBtdXRhdGU6IG11dGF0ZUNoYXQsIHNldFNpemUgfSA9IHVzZVNXUkluZmluaXRlPElDaGF0W10+KFxuICAgIChpbmRleCkgPT4gYC9hcGkvd29ya3NwYWNlLyR7d29ya3NwYWNlfS9jaGFubmVsLyR7Y2hhbm5lbH0vY2hhdHM/cGVyUGFnZT0ke1BBR0VfU0laRX0mcGFnZT0ke2luZGV4ICsgMX1gLFxuICAgIGZldGNoZXIsXG4gICk7XG4gIGNvbnN0IHsgZGF0YTogY2hhbm5lbE1lbWJlcnNEYXRhLCByZXZhbGlkYXRlOiByZXZhbGlkYXRlTWVtYmVycyB9ID0gdXNlU1dSPElVc2VyW10+KFxuICAgIHVzZXJEYXRhID8gYC9hcGkvd29ya3NwYWNlLyR7d29ya3NwYWNlfS9jaGFubmVsLyR7Y2hhbm5lbH0vbWVtYmVyc2AgOiBudWxsLFxuICAgIGZldGNoZXIsXG4gICk7XG4gIGNvbnN0IFtjaGF0LCBvbkNoYW5nZUNoYXQsIHNldENoYXRdID0gdXNlSW5wdXQoJycpO1xuICBjb25zdCBbbmV3TWVtYmVyLCBvbkNoYW5nZU5ld01lbWJlciwgc2V0TmV3TWVtYmVyXSA9IHVzZUlucHV0KCcnKTtcbiAgY29uc3QgW3Nob3dJbnZpdGVDaGFubmVsTW9kYWwsIHNldFNob3dJbnZpdGVDaGFubmVsTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBzY3JvbGxiYXJSZWYgPSB1c2VSZWY8U2Nyb2xsYmFycz4obnVsbCk7XG5cbiAgY29uc3QgaXNFbXB0eSA9IGNoYXREYXRhPy5bMF0/Lmxlbmd0aCA9PT0gMDtcbiAgY29uc3QgaXNSZWFjaGluZ0VuZCA9IGlzRW1wdHkgfHwgKGNoYXREYXRhICYmIGNoYXREYXRhW2NoYXREYXRhLmxlbmd0aCAtIDFdPy5sZW5ndGggPCBQQUdFX1NJWkUpO1xuXG4gIGNvbnN0IG9uSW52aXRlTWVtYmVyID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghbmV3TWVtYmVyIHx8ICFuZXdNZW1iZXIudHJpbSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGF4aW9zXG4gICAgICAgIC5wb3N0KGAvYXBpL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vY2hhbm5lbC8ke2NoYW5uZWx9L21lbWJlcmAsIHtcbiAgICAgICAgICBlbWFpbDogbmV3TWVtYmVyLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgcmV2YWxpZGF0ZU1lbWJlcnMoKTtcbiAgICAgICAgICBzZXRTaG93SW52aXRlQ2hhbm5lbE1vZGFsKGZhbHNlKTtcbiAgICAgICAgICBzZXROZXdNZW1iZXIoJycpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5kaXIoZXJyb3IpO1xuICAgICAgICAgIHRvYXN0LmVycm9yKGVycm9yLnJlc3BvbnNlPy5kYXRhLCB7IHBvc2l0aW9uOiAnYm90dG9tLWNlbnRlcicgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgW25ld01lbWJlcl0sXG4gICk7XG5cbiAgY29uc3Qgb25DbG9zZU1vZGFsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dJbnZpdGVDaGFubmVsTW9kYWwoZmFsc2UpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgb25TdWJtaXRGb3JtID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChjaGF0Py50cmltKCkgJiYgY2hhdERhdGEgJiYgY2hhbm5lbERhdGEgJiYgdXNlckRhdGEpIHtcbiAgICAgICAgY29uc3Qgc2F2ZWRDaGF0ID0gY2hhdDtcbiAgICAgICAgbXV0YXRlQ2hhdCgocHJldkNoYXREYXRhKSA9PiB7XG4gICAgICAgICAgcHJldkNoYXREYXRhWzBdLnVuc2hpZnQoe1xuICAgICAgICAgICAgaWQ6IChjaGF0RGF0YVswXVswXT8uaWQgfHwgMCkgKyAxLFxuICAgICAgICAgICAgY29udGVudDogc2F2ZWRDaGF0LFxuICAgICAgICAgICAgVXNlcklkOiB1c2VyRGF0YS5pZCxcbiAgICAgICAgICAgIFVzZXI6IHVzZXJEYXRhLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgQ2hhbm5lbElkOiBjaGFubmVsRGF0YS5pZCxcbiAgICAgICAgICAgIENoYW5uZWw6IGNoYW5uZWxEYXRhLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBwcmV2Q2hhdERhdGE7XG4gICAgICAgIH0sIGZhbHNlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBzZXRDaGF0KCcnKTtcbiAgICAgICAgICBpZiAoc2Nyb2xsYmFyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzY3JvbGxUb0JvdHRvbSEnKTtcbiAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50LnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXhpb3NcbiAgICAgICAgICAucG9zdChgL2FwaS93b3Jrc3BhY2UvJHt3b3Jrc3BhY2V9L2NoYW5uZWwvJHtjaGFubmVsfS9jaGF0YCwge1xuICAgICAgICAgICAgY29udGVudDogc2F2ZWRDaGF0LFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2NoYXQsIHdvcmtzcGFjZSwgY2hhbm5lbCwgY2hhbm5lbERhdGEsIHNjcm9sbGJhclJlZi5jdXJyZW50LCB1c2VyRGF0YSwgY2hhdERhdGFdLFxuICApO1xuXG4gIGNvbnN0IG9uTWVzc2FnZSA9IChkYXRhOiBJQ2hhdCkgPT4ge1xuICAgIGlmIChkYXRhLkNoYW5uZWwubmFtZSA9PT0gY2hhbm5lbCAmJiBkYXRhLlVzZXJJZCAhPT0gdXNlckRhdGE/LmlkKSB7XG4gICAgICBtdXRhdGVDaGF0KChjaGF0RGF0YSkgPT4ge1xuICAgICAgICBjaGF0RGF0YVswXS51bnNoaWZ0KGRhdGEpO1xuICAgICAgICByZXR1cm4gY2hhdERhdGE7XG4gICAgICB9LCBmYWxzZSkudGhlbigoKSA9PiB7XG4gICAgICAgIGlmIChzY3JvbGxiYXJSZWYuY3VycmVudCkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50LmdldFNjcm9sbEhlaWdodCgpIDxcbiAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50LmdldENsaWVudEhlaWdodCgpICsgc2Nyb2xsYmFyUmVmLmN1cnJlbnQuZ2V0U2Nyb2xsVG9wKCkgKyAxNTBcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzY3JvbGxUb0JvdHRvbSEnKTtcbiAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50LnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvYXN0LnN1Y2Nlc3MoJ+yDiCDrqZTsi5zsp4DqsIAg64+E7LCp7ZaI7Iq164uI64ukLicsIHtcbiAgICAgICAgICAgICAgb25DbGljaygpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxiYXJSZWYuY3VycmVudD8uc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY2xvc2VPbkNsaWNrOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzb2NrZXQ/Lm9uKCdtZXNzYWdlJywgb25NZXNzYWdlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc29ja2V0Py5vZmYoJ21lc3NhZ2UnLCBvbk1lc3NhZ2UpO1xuICAgIH07XG4gIH0sIFtzY3JvbGxiYXJSZWYuY3VycmVudCwgc29ja2V0LCB1c2VyRGF0YV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNoYXREYXRhPy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnNvbGUubG9nKCd0b0JvdHRvbScsIGNoYXREYXRhKTtcbiAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50Py5zY3JvbGxUb0JvdHRvbSgpO1xuICAgIH1cbiAgfSwgW2NoYXREYXRhLCBzY3JvbGxiYXJSZWYuY3VycmVudF0pO1xuXG4gIGNvbnN0IG9uQ2xpY2tJbnZpdGVDaGFubmVsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dJbnZpdGVDaGFubmVsTW9kYWwodHJ1ZSk7XG4gIH0sIFtdKTtcblxuICBpZiAoY2hhbm5lbHNEYXRhICYmICFjaGFubmVsRGF0YSkge1xuICAgIHJldHVybiA8UmVkaXJlY3QgdG89e2Avd29ya3NwYWNlLyR7d29ya3NwYWNlfS9jaGFubmVsL+ydvOuwmGB9IC8+O1xuICB9XG5cbiAgY29uc3QgY2hhdFNlY3Rpb25zID0gbWFrZVNlY3Rpb24oY2hhdERhdGEgPyAoW10gYXMgSUNoYXRbXSkuY29uY2F0KC4uLmNoYXREYXRhKS5yZXZlcnNlKCkgOiBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleFdyYXA6ICd3cmFwJywgaGVpZ2h0OiAnY2FsYygxMDB2aCAtIDM4cHgpJywgZmxleEZsb3c6ICdjb2x1bW4nIH19PlxuICAgICAgPEhlYWRlcj5cbiAgICAgICAgPHNwYW4+I3tjaGFubmVsfTwvc3Bhbj5cbiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXg6IDEsIGp1c3RpZnlDb250ZW50OiAnZmxleC1lbmQnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJyB9fT5cbiAgICAgICAgICA8c3Bhbj57Y2hhbm5lbE1lbWJlcnNEYXRhPy5sZW5ndGh9PC9zcGFuPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xpY2tJbnZpdGVDaGFubmVsfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYy1idXR0b24tdW5zdHlsZWQgcC1pYV9fdmlld19oZWFkZXJfX2J1dHRvblwiXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiQWRkIHBlb3BsZSB0byAjcmVhY3QtbmF0aXZlXCJcbiAgICAgICAgICAgIGRhdGEtc2s9XCJ0b29sdGlwX3BhcmVudFwiXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJjLWljb24gcC1pYV9fdmlld19oZWFkZXJfX2J1dHRvbl9pY29uIGMtaWNvbi0tYWRkLXVzZXJcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvSGVhZGVyPlxuICAgICAgPENoYXRMaXN0XG4gICAgICAgIHNjcm9sbGJhclJlZj17c2Nyb2xsYmFyUmVmfVxuICAgICAgICBpc1JlYWNoaW5nRW5kPXtpc1JlYWNoaW5nRW5kfVxuICAgICAgICBpc0VtcHR5PXtpc0VtcHR5fVxuICAgICAgICBjaGF0U2VjdGlvbnM9e2NoYXRTZWN0aW9uc31cbiAgICAgICAgc2V0U2l6ZT17c2V0U2l6ZX1cbiAgICAgIC8+XG4gICAgICA8Q2hhdEJveFxuICAgICAgICBvblN1Ym1pdEZvcm09e29uU3VibWl0Rm9ybX1cbiAgICAgICAgY2hhdD17Y2hhdH1cbiAgICAgICAgb25DaGFuZ2VDaGF0PXtvbkNoYW5nZUNoYXR9XG4gICAgICAgIHBsYWNlaG9sZGVyPXtgTWVzc2FnZSAjJHtjaGFubmVsfWB9XG4gICAgICAgIGRhdGE9e2NoYW5uZWxNZW1iZXJzRGF0YX1cbiAgICAgIC8+XG4gICAgICA8TW9kYWwgc2hvdz17c2hvd0ludml0ZUNoYW5uZWxNb2RhbH0gb25DbG9zZU1vZGFsPXtvbkNsb3NlTW9kYWx9PlxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17b25JbnZpdGVNZW1iZXJ9PlxuICAgICAgICAgIDxMYWJlbCBpZD1cIm1lbWJlci1sYWJlbFwiPlxuICAgICAgICAgICAgPHNwYW4+7LGE64SQIOuppOuyhCDstIjrjIA8L3NwYW4+XG4gICAgICAgICAgICA8SW5wdXQgaWQ9XCJtZW1iZXJcIiB2YWx1ZT17bmV3TWVtYmVyfSBvbkNoYW5nZT17b25DaGFuZ2VOZXdNZW1iZXJ9IC8+XG4gICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJzdWJtaXRcIj7sg53shLHtlZjquLA8L0J1dHRvbj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxUb2FzdENvbnRhaW5lciBwb3NpdGlvbj1cImJvdHRvbS1jZW50ZXJcIiAvPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2hhbm5lbDtcbiIsImltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJztcblxuZXhwb3J0IGNvbnN0IEhlYWRlciA9IHN0eWxlZC5oZWFkZXJgXG4gIGhlaWdodDogNjRweDtcbiAgZGlzcGxheTogZmxleDtcbiAgd2lkdGg6IDEwMCU7XG4gIC0tc2FmLTA6IHJnYmEodmFyKC0tc2tfZm9yZWdyb3VuZF9sb3csIDI5LCAyOCwgMjkpLCAwLjEzKTtcbiAgYm94LXNoYWRvdzogMCAxcHggMCB2YXIoLS1zYWYtMCk7XG4gIHBhZGRpbmc6IDIwcHggMTZweCAyMHB4IDIwcHg7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuXG4gICYgaW1nIHtcbiAgICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgfVxuYDtcbiIsImltcG9ydCBDaGF0Qm94IGZyb20gJ0Bjb21wb25lbnRzL0NoYXRCb3gnO1xuaW1wb3J0IENoYXRMaXN0IGZyb20gJ0Bjb21wb25lbnRzL0NoYXRMaXN0JztcbmltcG9ydCB1c2VJbnB1dCBmcm9tICdAaG9va3MvdXNlSW5wdXQnO1xuaW1wb3J0IHVzZVNvY2tldCBmcm9tICdAaG9va3MvdXNlU29ja2V0JztcbmltcG9ydCB7IEhlYWRlciB9IGZyb20gJ0BwYWdlcy9EaXJlY3RNZXNzYWdlL3N0eWxlcyc7XG5pbXBvcnQgeyBJRE0gfSBmcm9tICdAdHlwaW5ncy9kYic7XG5pbXBvcnQgZmV0Y2hlciBmcm9tICdAdXRpbHMvZmV0Y2hlcic7XG5pbXBvcnQgbWFrZVNlY3Rpb24gZnJvbSAnQHV0aWxzL21ha2VTZWN0aW9uJztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgZ3JhdmF0YXIgZnJvbSAnZ3JhdmF0YXInO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFNjcm9sbGJhcnMgfSBmcm9tICdyZWFjdC1jdXN0b20tc2Nyb2xsYmFycyc7XG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdyZWFjdC10b2FzdGlmeSc7XG5pbXBvcnQgdXNlU1dSLCB7IHVzZVNXUkluZmluaXRlIH0gZnJvbSAnc3dyJztcblxuY29uc3QgUEFHRV9TSVpFID0gMjA7XG5jb25zdCBEaXJlY3RNZXNzYWdlID0gKCkgPT4ge1xuICBjb25zdCB7IHdvcmtzcGFjZSwgaWQgfSA9IHVzZVBhcmFtczx7IHdvcmtzcGFjZTogc3RyaW5nOyBpZDogc3RyaW5nIH0+KCk7XG4gIGNvbnN0IFtzb2NrZXRdID0gdXNlU29ja2V0KHdvcmtzcGFjZSk7XG4gIGNvbnN0IHsgZGF0YTogbXlEYXRhIH0gPSB1c2VTV1IoJy9hcGkvdXNlcicsIGZldGNoZXIpO1xuICBjb25zdCB7IGRhdGE6IHVzZXJEYXRhIH0gPSB1c2VTV1IoYC9hcGkvd29ya3NwYWNlLyR7d29ya3NwYWNlfS91c2VyLyR7aWR9YCwgZmV0Y2hlcik7XG4gIGNvbnN0IHsgZGF0YTogY2hhdERhdGEsIHJldmFsaWRhdGU6IHJldmFsaWRhdGVDaGF0LCBtdXRhdGU6IG11dGF0ZUNoYXQsIHNldFNpemUgfSA9IHVzZVNXUkluZmluaXRlPElETVtdPihcbiAgICAoaW5kZXgpID0+IGAvYXBpL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vZG0vJHtpZH0vY2hhdHM/cGVyUGFnZT0ke1BBR0VfU0laRX0mcGFnZT0ke2luZGV4ICsgMX1gLFxuICAgIGZldGNoZXIsXG4gICk7XG4gIGNvbnN0IFtjaGF0LCBvbkNoYW5nZUNoYXQsIHNldENoYXRdID0gdXNlSW5wdXQoJycpO1xuICBjb25zdCBzY3JvbGxiYXJSZWYgPSB1c2VSZWY8U2Nyb2xsYmFycz4obnVsbCk7XG5cbiAgY29uc3QgaXNFbXB0eSA9IGNoYXREYXRhPy5bMF0/Lmxlbmd0aCA9PT0gMDtcbiAgY29uc3QgaXNSZWFjaGluZ0VuZCA9IGlzRW1wdHkgfHwgKGNoYXREYXRhICYmIGNoYXREYXRhW2NoYXREYXRhLmxlbmd0aCAtIDFdPy5sZW5ndGggPCBQQUdFX1NJWkUpO1xuXG4gIGNvbnN0IG9uU3VibWl0Rm9ybSA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoY2hhdD8udHJpbSgpICYmIGNoYXREYXRhKSB7XG4gICAgICAgIGNvbnN0IHNhdmVkQ2hhdCA9IGNoYXQ7XG4gICAgICAgIG11dGF0ZUNoYXQoKHByZXZDaGF0RGF0YSkgPT4ge1xuICAgICAgICAgIHByZXZDaGF0RGF0YVswXS51bnNoaWZ0KHtcbiAgICAgICAgICAgIGlkOiAoY2hhdERhdGFbMF1bMF0/LmlkIHx8IDApICsgMSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHNhdmVkQ2hhdCxcbiAgICAgICAgICAgIFNlbmRlcklkOiBteURhdGEuaWQsXG4gICAgICAgICAgICBTZW5kZXI6IG15RGF0YSxcbiAgICAgICAgICAgIFJlY2VpdmVySWQ6IHVzZXJEYXRhLmlkLFxuICAgICAgICAgICAgUmVjZWl2ZXI6IHVzZXJEYXRhLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBwcmV2Q2hhdERhdGE7XG4gICAgICAgIH0sIGZhbHNlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBzZXRDaGF0KCcnKTtcbiAgICAgICAgICBpZiAoc2Nyb2xsYmFyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzY3JvbGxUb0JvdHRvbSEnKTtcbiAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50LnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXhpb3NcbiAgICAgICAgICAucG9zdChgL2FwaS93b3Jrc3BhY2UvJHt3b3Jrc3BhY2V9L2RtLyR7aWR9L2NoYXRgLCB7XG4gICAgICAgICAgICBjb250ZW50OiBjaGF0LFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2NoYXQsIHdvcmtzcGFjZSwgaWQsIHNjcm9sbGJhclJlZi5jdXJyZW50LCB1c2VyRGF0YSwgY2hhdERhdGFdLFxuICApO1xuXG4gIGNvbnN0IG9uTWVzc2FnZSA9XG4gICAgKGRhdGE6IElETSkgPT4ge1xuICAgICAgaWYgKGRhdGEuU2VuZGVySWQgPT09IE51bWJlcihpZCkgJiYgbXlEYXRhLmlkICE9PSBOdW1iZXIoaWQpKSB7XG4gICAgICAgIG11dGF0ZUNoYXQoKGNoYXREYXRhKSA9PiB7XG4gICAgICAgICAgY2hhdERhdGFbMF0udW5zaGlmdChkYXRhKTtcbiAgICAgICAgICByZXR1cm4gY2hhdERhdGE7XG4gICAgICAgIH0sIGZhbHNlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBpZiAoc2Nyb2xsYmFyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgc2Nyb2xsYmFyUmVmLmN1cnJlbnQuZ2V0U2Nyb2xsSGVpZ2h0KCkgPFxuICAgICAgICAgICAgICBzY3JvbGxiYXJSZWYuY3VycmVudC5nZXRDbGllbnRIZWlnaHQoKSArIHNjcm9sbGJhclJlZi5jdXJyZW50LmdldFNjcm9sbFRvcCgpICsgMTUwXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Njcm9sbFRvQm90dG9tIScpO1xuICAgICAgICAgICAgICBzY3JvbGxiYXJSZWYuY3VycmVudC5zY3JvbGxUb0JvdHRvbSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdG9hc3Quc3VjY2Vzcygn7IOIIOuplOyLnOyngOqwgCDrj4TssKntlojsirXri4jri6QuJywge1xuICAgICAgICAgICAgICAgIG9uQ2xpY2soKSB7XG4gICAgICAgICAgICAgICAgICBzY3JvbGxiYXJSZWYuY3VycmVudD8uc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNsb3NlT25DbGljazogdHJ1ZSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc29ja2V0Py5vbignZG0nLCBvbk1lc3NhZ2UpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzb2NrZXQ/Lm9mZignZG0nLCBvbk1lc3NhZ2UpO1xuICAgIH07XG4gIH0sIFtzY3JvbGxiYXJSZWYuY3VycmVudCwgc29ja2V0LCBpZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNoYXREYXRhPy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnNvbGUubG9nKCd0b0JvdHRvbScsIGNoYXREYXRhKTtcbiAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50Py5zY3JvbGxUb0JvdHRvbSgpO1xuICAgIH1cbiAgfSwgW2NoYXREYXRhLCBzY3JvbGxiYXJSZWYuY3VycmVudF0pO1xuXG4gIGlmICghdXNlckRhdGEgfHwgIW15RGF0YSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgY2hhdFNlY3Rpb25zID0gbWFrZVNlY3Rpb24oY2hhdERhdGEgPyAoW10gYXMgSURNW10pLmNvbmNhdCguLi5jaGF0RGF0YSkucmV2ZXJzZSgpIDogW10pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhXcmFwOiAnd3JhcCcsIGhlaWdodDogJ2NhbGMoMTAwdmggLSAzOHB4KScsIGZsZXhGbG93OiAnY29sdW1uJyB9fT5cbiAgICAgIDxIZWFkZXI+XG4gICAgICAgIDxpbWcgc3JjPXtncmF2YXRhci51cmwodXNlckRhdGEuZW1haWwsIHsgczogJzI0cHgnIH0pfSBhbHQ9e3VzZXJEYXRhLm5pY2tuYW1lfSAvPlxuICAgICAgICA8c3Bhbj57dXNlckRhdGEubmlja25hbWV9PC9zcGFuPlxuICAgICAgPC9IZWFkZXI+XG4gICAgICA8Q2hhdExpc3RcbiAgICAgICAgc2Nyb2xsYmFyUmVmPXtzY3JvbGxiYXJSZWZ9XG4gICAgICAgIGlzUmVhY2hpbmdFbmQ9e2lzUmVhY2hpbmdFbmR9XG4gICAgICAgIGlzRW1wdHk9e2lzRW1wdHl9XG4gICAgICAgIGNoYXRTZWN0aW9ucz17Y2hhdFNlY3Rpb25zfVxuICAgICAgICBzZXRTaXplPXtzZXRTaXplfVxuICAgICAgLz5cbiAgICAgIDxDaGF0Qm94XG4gICAgICAgIG9uU3VibWl0Rm9ybT17b25TdWJtaXRGb3JtfVxuICAgICAgICBjaGF0PXtjaGF0fVxuICAgICAgICBvbkNoYW5nZUNoYXQ9e29uQ2hhbmdlQ2hhdH1cbiAgICAgICAgcGxhY2Vob2xkZXI9e2BNZXNzYWdlICR7dXNlckRhdGEubmlja25hbWV9YH1cbiAgICAgICAgZGF0YT17W119XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRGlyZWN0TWVzc2FnZTtcbiIsImltcG9ydCBDaGFubmVsTGlzdCBmcm9tICdAY29tcG9uZW50cy9DaGFubmVsTGlzdCc7XG5pbXBvcnQgRE1MaXN0IGZyb20gJ0Bjb21wb25lbnRzL0RNTGlzdCc7XG5pbXBvcnQgTWVudSBmcm9tICdAY29tcG9uZW50cy9NZW51JztcbmltcG9ydCBNb2RhbCBmcm9tICdAY29tcG9uZW50cy9Nb2RhbCc7XG5pbXBvcnQgdXNlSW5wdXQgZnJvbSAnQGhvb2tzL3VzZUlucHV0JztcbmltcG9ydCB1c2VTb2NrZXQgZnJvbSAnQGhvb2tzL3VzZVNvY2tldCc7XG5pbXBvcnQgQ2hhbm5lbCBmcm9tICdAcGFnZXMvQ2hhbm5lbCc7XG5pbXBvcnQgRGlyZWN0TWVzc2FnZSBmcm9tICdAcGFnZXMvRGlyZWN0TWVzc2FnZSc7XG5pbXBvcnQgeyBCdXR0b24sIElucHV0LCBMYWJlbCB9IGZyb20gJ0BwYWdlcy9TaWduVXAvc3R5bGVzJztcbmltcG9ydCB7IElDaGFubmVsLCBJQ2hhdCwgSURNLCBJVXNlciwgSVVzZXJXaXRoT25saW5lIH0gZnJvbSAnQHR5cGluZ3MvZGInO1xuaW1wb3J0IGZldGNoZXIgZnJvbSAnQHV0aWxzL2ZldGNoZXInO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBncmF2YXRhciBmcm9tICdncmF2YXRhcic7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUhpc3RvcnksIHVzZUxvY2F0aW9uLCB1c2VQYXJhbXMsIHVzZVJvdXRlTWF0Y2ggfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuaW1wb3J0IHsgTGluaywgTmF2TGluaywgUmVkaXJlY3QsIFJvdXRlLCBTd2l0Y2ggfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcbmltcG9ydCB7IHRvYXN0LCBUb2FzdENvbnRhaW5lciB9IGZyb20gJ3JlYWN0LXRvYXN0aWZ5JztcbmltcG9ydCAncmVhY3QtdG9hc3RpZnkvZGlzdC9SZWFjdFRvYXN0aWZ5LmNzcyc7XG5pbXBvcnQgaW8gZnJvbSAnc29ja2V0LmlvLWNsaWVudCc7XG5pbXBvcnQgdXNlU1dSIGZyb20gJ3N3cic7XG5cbmltcG9ydCB7XG4gIEFkZEJ1dHRvbixcbiAgQ2hhbm5lbHMsXG4gIENoYXRzLFxuICBDb2xsYXBzZUJ1dHRvbixcbiAgSGVhZGVyLFxuICBMb2dPdXRCdXR0b24sXG4gIE1lbnVTY3JvbGwsXG4gIFByb2ZpbGVJbWcsXG4gIFByb2ZpbGVNb2RhbCxcbiAgUmlnaHRNZW51LFxuICBXb3Jrc3BhY2VCdXR0b24sXG4gIFdvcmtzcGFjZU1vZGFsLFxuICBXb3Jrc3BhY2VOYW1lLFxuICBXb3Jrc3BhY2VzLFxuICBXb3Jrc3BhY2VXcmFwcGVyLFxufSBmcm9tICcuL3N0eWxlcyc7XG5cbmNvbnN0IFdvcmtzcGFjZSA9ICgpID0+IHtcbiAgY29uc3QgcGFyYW1zID0gdXNlUGFyYW1zPHsgd29ya3NwYWNlPzogc3RyaW5nIH0+KCk7XG4gIGNvbnN0IGxvY2F0aW9uID0gdXNlTG9jYXRpb24oKTtcbiAgY29uc3Qgcm91dGVNYXRjaCA9IHVzZVJvdXRlTWF0Y2goKTtcbiAgY29uc3QgaGlzdG9yeSA9IHVzZUhpc3RvcnkoKTtcbiAgLy8gY29uc29sZS5sb2coJ3BhcmFtcycsIHBhcmFtcywgJ2xvY2F0aW9uJywgbG9jYXRpb24sICdyb3V0ZU1hdGNoJywgcm91dGVNYXRjaCwgJ2hpc3RvcnknLCBoaXN0b3J5KTtcbiAgY29uc3QgeyB3b3Jrc3BhY2UgfSA9IHBhcmFtcztcbiAgY29uc3QgW3NvY2tldCwgZGlzY29ubmVjdFNvY2tldF0gPSB1c2VTb2NrZXQod29ya3NwYWNlKTtcbiAgY29uc3QgeyBkYXRhOiB1c2VyRGF0YSwgcmV2YWxpZGF0ZTogcmV2YWxpZGF0ZVVzZXIgfSA9IHVzZVNXUjxJVXNlciB8IGZhbHNlPignL2FwaS91c2VyJywgZmV0Y2hlcik7XG4gIGNvbnN0IHsgZGF0YTogY2hhbm5lbERhdGEsIHJldmFsaWRhdGU6IHJldmFsaWRhdGVDaGFubmVsIH0gPSB1c2VTV1I8SUNoYW5uZWxbXT4oXG4gICAgdXNlckRhdGEgPyBgL2FwaS93b3Jrc3BhY2UvJHt3b3Jrc3BhY2V9L2NoYW5uZWxzYCA6IG51bGwsXG4gICAgZmV0Y2hlcixcbiAgKTtcbiAgY29uc29sZS5sb2coJ3JlcmVuZGVyJywgJ3VzZXJEYXRhJywgdXNlckRhdGEsICdjaGFubmVsRGF0YScsIGNoYW5uZWxEYXRhKTtcbiAgY29uc3QgW3Nob3dDcmVhdGVXb3Jrc3BhY2VNb2RhbCwgc2V0U2hvd0NyZWF0ZVdvcmtzcGFjZU1vZGFsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dJbnZpdGVXb3Jrc3BhY2VNb2RhbCwgc2V0U2hvd0ludml0ZVdvcmtzcGFjZU1vZGFsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dDcmVhdGVDaGFubmVsTW9kYWwsIHNldFNob3dDcmVhdGVDaGFubmVsTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd1VzZXJNZW51LCBzZXRTaG93VXNlck1lbnVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd1dvcmtzcGFjZU1vZGFsLCBzZXRTaG93V29ya3NwYWNlTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbmV3V29ya3NwYWNlLCBvbkNoYW5nZU5ld1dvcmtzcGFjZSwgc2V0TmV3V29ya3NwYWNlXSA9IHVzZUlucHV0KCcnKTtcbiAgY29uc3QgW25ld1VybCwgb25DaGFuZ2VOZXdVcmwsIHNldE5ld1VybF0gPSB1c2VJbnB1dCgnJyk7XG4gIGNvbnN0IFtuZXdDaGFubmVsLCBvbkNoYW5nZU5ld0NoYW5uZWwsIHNldE5ld0NoYW5uZWxdID0gdXNlSW5wdXQoJycpO1xuICBjb25zdCBbbmV3TWVtYmVyLCBvbkNoYW5nZU5ld01lbWJlciwgc2V0TmV3TWVtYmVyXSA9IHVzZUlucHV0KCcnKTtcblxuICBjb25zdCBvbkxvZ091dCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBheGlvc1xuICAgICAgLnBvc3QoJy9hcGkvbG9nb3V0JylcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgcmV2YWxpZGF0ZVVzZXIoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZGlyKGVycm9yKTtcbiAgICAgICAgdG9hc3QuZXJyb3IoZXJyb3IucmVzcG9uc2U/LmRhdGEsIHsgcG9zaXRpb246ICdib3R0b20tY2VudGVyJyB9KTtcbiAgICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgb25DcmVhdGVXb3Jrc3BhY2UgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKCFuZXdXb3Jrc3BhY2UgfHwgIW5ld1dvcmtzcGFjZS50cmltKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCFuZXdVcmwgfHwgIW5ld1VybC50cmltKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgYXhpb3NcbiAgICAgICAgLnBvc3QoJy9hcGkvd29ya3NwYWNlJywge1xuICAgICAgICAgIHdvcmtzcGFjZTogbmV3V29ya3NwYWNlLFxuICAgICAgICAgIHVybDogbmV3VXJsLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgcmV2YWxpZGF0ZVVzZXIoKTtcbiAgICAgICAgICBzZXRTaG93Q3JlYXRlV29ya3NwYWNlTW9kYWwoZmFsc2UpO1xuICAgICAgICAgIHNldE5ld1dvcmtzcGFjZSgnJyk7XG4gICAgICAgICAgc2V0TmV3VXJsKCcnKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZGlyKGVycm9yKTtcbiAgICAgICAgICB0b2FzdC5lcnJvcihlcnJvci5yZXNwb25zZT8uZGF0YSwgeyBwb3NpdGlvbjogJ2JvdHRvbS1jZW50ZXInIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIFtuZXdXb3Jrc3BhY2UsIG5ld1VybF0sXG4gICk7XG4gIGNvbnN0IG9uQ3JlYXRlQ2hhbm5lbCA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoIW5ld0NoYW5uZWwgfHwgIW5ld0NoYW5uZWwudHJpbSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGF4aW9zXG4gICAgICAgIC5wb3N0KGAvYXBpL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vY2hhbm5lbGAsIHtcbiAgICAgICAgICBuYW1lOiBuZXdDaGFubmVsLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgcmV2YWxpZGF0ZUNoYW5uZWwoKTtcbiAgICAgICAgICBzZXRTaG93Q3JlYXRlQ2hhbm5lbE1vZGFsKGZhbHNlKTtcbiAgICAgICAgICBzZXROZXdDaGFubmVsKCcnKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZGlyKGVycm9yKTtcbiAgICAgICAgICB0b2FzdC5lcnJvcihlcnJvci5yZXNwb25zZT8uZGF0YSwgeyBwb3NpdGlvbjogJ2JvdHRvbS1jZW50ZXInIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIFtuZXdDaGFubmVsXSxcbiAgKTtcbiAgY29uc3Qgb25JbnZpdGVNZW1iZXIgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKCFuZXdNZW1iZXIgfHwgIW5ld01lbWJlci50cmltKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgYXhpb3NcbiAgICAgICAgLnBvc3QoYC9hcGkvd29ya3NwYWNlLyR7d29ya3NwYWNlfS9tZW1iZXJgLCB7XG4gICAgICAgICAgZW1haWw6IG5ld01lbWJlcixcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJldmFsaWRhdGVDaGFubmVsKCk7XG4gICAgICAgICAgc2V0U2hvd0ludml0ZVdvcmtzcGFjZU1vZGFsKGZhbHNlKTtcbiAgICAgICAgICBzZXROZXdNZW1iZXIoJycpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5kaXIoZXJyb3IpO1xuICAgICAgICAgIHRvYXN0LmVycm9yKGVycm9yLnJlc3BvbnNlPy5kYXRhLCB7IHBvc2l0aW9uOiAnYm90dG9tLWNlbnRlcicgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgW25ld01lbWJlcl0sXG4gICk7XG5cbiAgY29uc3Qgb25DbGlja0NyZWF0ZVdvcmtzcGFjZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTaG93Q3JlYXRlV29ya3NwYWNlTW9kYWwodHJ1ZSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBvbkNsaWNrQWRkQ2hhbm5lbCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTaG93Q3JlYXRlQ2hhbm5lbE1vZGFsKHRydWUpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgb25DbGlja0ludml0ZVdvcmtzcGFjZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTaG93SW52aXRlV29ya3NwYWNlTW9kYWwodHJ1ZSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBvbkNsb3NlTW9kYWwgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U2hvd0NyZWF0ZVdvcmtzcGFjZU1vZGFsKGZhbHNlKTtcbiAgICBzZXRTaG93Q3JlYXRlQ2hhbm5lbE1vZGFsKGZhbHNlKTtcbiAgICBzZXRTaG93SW52aXRlV29ya3NwYWNlTW9kYWwoZmFsc2UpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgb25DbGlja1VzZXJQcm9maWxlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dVc2VyTWVudSgocHJldikgPT4gIXByZXYpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgdG9nZ2xlV29ya3NwYWNlTW9kYWwgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U2hvd1dvcmtzcGFjZU1vZGFsKChwcmV2KSA9PiAhcHJldik7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zb2xlLmluZm8oJ2Rpc2Nvbm5lY3Qgc29ja2V0Jywgd29ya3NwYWNlKTtcbiAgICAgIGRpc2Nvbm5lY3RTb2NrZXQoKTtcbiAgICB9O1xuICB9LCBbd29ya3NwYWNlXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNoYW5uZWxEYXRhICYmIHVzZXJEYXRhKSB7XG4gICAgICBjb25zb2xlLmluZm8oJ+uhnOq3uOyduO2VmOyekCcpO1xuICAgICAgc29ja2V0Py5lbWl0KCdsb2dpbicsIHsgaWQ6IHVzZXJEYXRhPy5pZCwgY2hhbm5lbHM6IGNoYW5uZWxEYXRhLm1hcCgodikgPT4gdi5pZCkgfSk7XG4gICAgfVxuICB9LCBbdXNlckRhdGEsIGNoYW5uZWxEYXRhXSk7XG5cbiAgaWYgKHVzZXJEYXRhID09PSBmYWxzZSkge1xuICAgIHJldHVybiA8UmVkaXJlY3QgdG89XCIvbG9naW5cIiAvPjtcbiAgfVxuICBpZiAodXNlckRhdGEgJiYgIXVzZXJEYXRhLldvcmtzcGFjZXMuZmluZCgodikgPT4gdi51cmwgPT09IHdvcmtzcGFjZSkpIHtcbiAgICByZXR1cm4gPFJlZGlyZWN0IHRvPVwiL3dvcmtzcGFjZS9zbGVhY3QvY2hhbm5lbC/snbzrsJhcIiAvPjtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxIZWFkZXI+XG4gICAgICAgIHt1c2VyRGF0YSAmJiAoXG4gICAgICAgICAgPFJpZ2h0TWVudT5cbiAgICAgICAgICAgIDxzcGFuIG9uQ2xpY2s9e29uQ2xpY2tVc2VyUHJvZmlsZX0+XG4gICAgICAgICAgICAgIDxQcm9maWxlSW1nIHNyYz17Z3JhdmF0YXIudXJsKHVzZXJEYXRhLmVtYWlsLCB7IHM6ICcyOHB4JyB9KX0gYWx0PXt1c2VyRGF0YS5uaWNrbmFtZX0gLz5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIHtzaG93VXNlck1lbnUgJiYgKFxuICAgICAgICAgICAgICA8TWVudSBzdHlsZT17eyByaWdodDogMCwgdG9wOiAzOCB9fSBzaG93PXtzaG93VXNlck1lbnV9IG9uQ2xvc2VNb2RhbD17b25DbGlja1VzZXJQcm9maWxlfT5cbiAgICAgICAgICAgICAgICA8UHJvZmlsZU1vZGFsIHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JyB9fT5cbiAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPXtncmF2YXRhci51cmwodXNlckRhdGEuZW1haWwsIHsgczogJzM2cHgnIH0pfSBhbHQ9e3VzZXJEYXRhLm5pY2tuYW1lfSAvPlxuICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLCBtYXJnaW5MZWZ0OiAxMCB9fT5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCJwcm9maWxlLW5hbWVcIj57dXNlckRhdGEubmlja25hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD1cInByb2ZpbGUtYWN0aXZlXCI+QWN0aXZlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9Qcm9maWxlTW9kYWw+XG4gICAgICAgICAgICAgICAgPExvZ091dEJ1dHRvbiBvbkNsaWNrPXtvbkxvZ091dH0+66Gc6re47JWE7JuDPC9Mb2dPdXRCdXR0b24+XG4gICAgICAgICAgICAgIDwvTWVudT5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9SaWdodE1lbnU+XG4gICAgICAgICl9XG4gICAgICA8L0hlYWRlcj5cbiAgICAgIDxXb3Jrc3BhY2VXcmFwcGVyPlxuICAgICAgICA8V29ya3NwYWNlcz5cbiAgICAgICAgICB7dXNlckRhdGE/LldvcmtzcGFjZXMubWFwKCh3cykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPExpbmsga2V5PXt3cy5pZH0gdG89e2Avd29ya3NwYWNlLyR7d3MudXJsfS9jaGFubmVsL+ydvOuwmGB9PlxuICAgICAgICAgICAgICAgIDxXb3Jrc3BhY2VCdXR0b24+e3dzLm5hbWUuc2xpY2UoMCwgMSkudG9VcHBlckNhc2UoKX08L1dvcmtzcGFjZUJ1dHRvbj5cbiAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgICAgICA8QWRkQnV0dG9uIG9uQ2xpY2s9e29uQ2xpY2tDcmVhdGVXb3Jrc3BhY2V9Pis8L0FkZEJ1dHRvbj5cbiAgICAgICAgPC9Xb3Jrc3BhY2VzPlxuICAgICAgICA8Q2hhbm5lbHM+XG4gICAgICAgICAgPFdvcmtzcGFjZU5hbWUgb25DbGljaz17dG9nZ2xlV29ya3NwYWNlTW9kYWx9PlxuICAgICAgICAgICAge3VzZXJEYXRhPy5Xb3Jrc3BhY2VzLmZpbmQoKHYpID0+IHYudXJsID09PSB3b3Jrc3BhY2UpPy5uYW1lfVxuICAgICAgICAgIDwvV29ya3NwYWNlTmFtZT5cbiAgICAgICAgICA8TWVudVNjcm9sbD5cbiAgICAgICAgICAgIDxNZW51IHNob3c9e3Nob3dXb3Jrc3BhY2VNb2RhbH0gb25DbG9zZU1vZGFsPXt0b2dnbGVXb3Jrc3BhY2VNb2RhbH0gc3R5bGU9e3sgdG9wOiA5NSwgbGVmdDogODAgfX0+XG4gICAgICAgICAgICAgIDxXb3Jrc3BhY2VNb2RhbD5cbiAgICAgICAgICAgICAgICA8aDI+e3VzZXJEYXRhPy5Xb3Jrc3BhY2VzLmZpbmQoKHYpID0+IHYudXJsID09PSB3b3Jrc3BhY2UpPy5uYW1lfTwvaDI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNsaWNrSW52aXRlV29ya3NwYWNlfT7sm4ztgazsiqTtjpjsnbTsiqTsl5Ag7IKs7Jqp7J6QIOy0iOuMgDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25DbGlja0FkZENoYW5uZWx9PuyxhOuEkCDrp4zrk6TquLA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uTG9nT3V0fT7roZzqt7jslYTsm4M8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9Xb3Jrc3BhY2VNb2RhbD5cbiAgICAgICAgICAgIDwvTWVudT5cbiAgICAgICAgICAgIDxDaGFubmVsTGlzdCB1c2VyRGF0YT17dXNlckRhdGF9IGNoYW5uZWxEYXRhPXtjaGFubmVsRGF0YX0gLz5cbiAgICAgICAgICAgIDxETUxpc3QgdXNlckRhdGE9e3VzZXJEYXRhfSAvPlxuICAgICAgICAgIDwvTWVudVNjcm9sbD5cbiAgICAgICAgPC9DaGFubmVscz5cbiAgICAgICAgPENoYXRzPlxuICAgICAgICAgIDxTd2l0Y2g+XG4gICAgICAgICAgICA8Um91dGUgcGF0aD1cIi93b3Jrc3BhY2UvOndvcmtzcGFjZS9jaGFubmVsLzpjaGFubmVsXCIgY29tcG9uZW50PXtDaGFubmVsfSAvPlxuICAgICAgICAgICAgPFJvdXRlIHBhdGg9XCIvd29ya3NwYWNlLzp3b3Jrc3BhY2UvZG0vOmlkXCIgY29tcG9uZW50PXtEaXJlY3RNZXNzYWdlfSAvPlxuICAgICAgICAgIDwvU3dpdGNoPlxuICAgICAgICA8L0NoYXRzPlxuICAgICAgPC9Xb3Jrc3BhY2VXcmFwcGVyPlxuICAgICAgPE1vZGFsIHNob3c9e3Nob3dDcmVhdGVXb3Jrc3BhY2VNb2RhbH0gb25DbG9zZU1vZGFsPXtvbkNsb3NlTW9kYWx9PlxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17b25DcmVhdGVXb3Jrc3BhY2V9PlxuICAgICAgICAgIDxMYWJlbCBpZD1cIndvcmtzcGFjZS1sYWJlbFwiPlxuICAgICAgICAgICAgPHNwYW4+7JuM7YGs7Iqk7Y6Y7J207IqkIOydtOumhDwvc3Bhbj5cbiAgICAgICAgICAgIDxJbnB1dCBpZD1cIndvcmtzcGFjZVwiIHZhbHVlPXtuZXdXb3Jrc3BhY2V9IG9uQ2hhbmdlPXtvbkNoYW5nZU5ld1dvcmtzcGFjZX0gLz5cbiAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgIDxMYWJlbCBpZD1cIndvcmtzcGFjZS11cmwtbGFiZWxcIj5cbiAgICAgICAgICAgIDxzcGFuPuybjO2BrOyKpO2OmOydtOyKpCB1cmw8L3NwYW4+XG4gICAgICAgICAgICA8SW5wdXQgaWQ9XCJ3b3Jrc3BhY2UtdXJsXCIgdmFsdWU9e25ld1VybH0gb25DaGFuZ2U9e29uQ2hhbmdlTmV3VXJsfSAvPlxuICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgPEJ1dHRvbiB0eXBlPVwic3VibWl0XCI+7IOd7ISx7ZWY6riwPC9CdXR0b24+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvTW9kYWw+XG4gICAgICA8TW9kYWwgc2hvdz17c2hvd0NyZWF0ZUNoYW5uZWxNb2RhbH0gb25DbG9zZU1vZGFsPXtvbkNsb3NlTW9kYWx9PlxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17b25DcmVhdGVDaGFubmVsfT5cbiAgICAgICAgICA8TGFiZWwgaWQ9XCJjaGFubmVsLWxhYmVsXCI+XG4gICAgICAgICAgICA8c3Bhbj7ssYTrhJAg7J2066aEPC9zcGFuPlxuICAgICAgICAgICAgPElucHV0IGlkPVwiY2hhbm5lbFwiIHZhbHVlPXtuZXdDaGFubmVsfSBvbkNoYW5nZT17b25DaGFuZ2VOZXdDaGFubmVsfSAvPlxuICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgPEJ1dHRvbj7sg53shLHtlZjquLA8L0J1dHRvbj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9Nb2RhbD5cbiAgICAgIDxNb2RhbCBzaG93PXtzaG93SW52aXRlV29ya3NwYWNlTW9kYWx9IG9uQ2xvc2VNb2RhbD17b25DbG9zZU1vZGFsfT5cbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e29uSW52aXRlTWVtYmVyfT5cbiAgICAgICAgICA8TGFiZWwgaWQ9XCJtZW1iZXItbGFiZWxcIj5cbiAgICAgICAgICAgIDxzcGFuPuydtOuplOydvDwvc3Bhbj5cbiAgICAgICAgICAgIDxJbnB1dCBpZD1cIm1lbWJlclwiIHR5cGU9XCJlbWFpbFwiIHZhbHVlPXtuZXdNZW1iZXJ9IG9uQ2hhbmdlPXtvbkNoYW5nZU5ld01lbWJlcn0gLz5cbiAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgIDxCdXR0b24gdHlwZT1cInN1Ym1pdFwiPuy0iOuMgO2VmOq4sDwvQnV0dG9uPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICA8L01vZGFsPlxuICAgICAgPFRvYXN0Q29udGFpbmVyIHBvc2l0aW9uPVwiYm90dG9tLWNlbnRlclwiIC8+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBXb3Jrc3BhY2U7XG4iXSwic291cmNlUm9vdCI6IiJ9